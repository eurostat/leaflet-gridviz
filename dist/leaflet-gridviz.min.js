(()=>{var t={271:()=>{L.DomUtil.setTransform=L.DomUtil.setTransform||function(t,i,s){var e=i||new L.Point(0,0);t.style[L.DomUtil.TRANSFORM]=(L.Browser.ie3d?"translate("+e.x+"px,"+e.y+"px)":"translate3d("+e.x+"px,"+e.y+"px,0)")+(s?" scale("+s+")":"")},L.CanvasLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t){this._map=null,this._canvas=null,this._frame=null,this._delegate=null,L.setOptions(this,t)},delegate:function(t){return this._delegate=t,this},needRedraw:function(){return this._frame||(this._frame=L.Util.requestAnimFrame(this.drawLayer,this)),this},_onLayerDidResize:function(t){this._canvas.width=t.newSize.x,this._canvas.height=t.newSize.y},_updatePosition:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t)},_onLayerDidMove:function(){this._updatePosition(),this.drawLayer()},getEvents:function(){var t={resize:this._onLayerDidResize,moveend:this._onLayerDidMove,zoom:this._onLayerDidMove};return this._map.options.zoomAnimation&&L.Browser.any3d&&(t.zoomanim=this._animateZoom),t},onAdd:function(t){this._map=t,this._canvas=L.DomUtil.create("canvas","leaflet-layer"),this.tiles={};var i=this._map.getSize();this._canvas.width=i.x,this._canvas.height=i.y;var s=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(this._canvas,"leaflet-zoom-"+(s?"animated":"hide"));let e=t.createPane("gridviz");t.getPane("gridviz").style.zIndex=399,e.appendChild(this._canvas),t.on(this.getEvents(),this);var n=this._delegate||this;n.onLayerDidMount&&n.onLayerDidMount(),this._updatePosition(),this.needRedraw()},onRemove:function(t){var i=this._delegate||this;i.onLayerWillUnmount&&i.onLayerWillUnmount(),this._frame&&L.Util.cancelAnimFrame(this._frame),t.getPanes();let s=t.getPane("gridviz");this._canvas&&this._canvas.parentElement===s&&(s.removeChild(this._canvas),t.off(this.getEvents(),this),this._canvas=null)},addTo:function(t){return t.addLayer(this),this},LatLonToMercator:function(t){return{x:6378137*t.lng*Math.PI/180,y:6378137*Math.log(Math.tan((90+t.lat)*Math.PI/360))}},drawLayer:function(){this.onDrawLayer(),this._frame=null},_setTransform:function(t,i,s){var e=i||new L.Point(0,0);t.style[L.DomUtil.TRANSFORM]=(L.Browser.ie3d?"translate("+e.x+"px,"+e.y+"px)":"translate3d("+e.x+"px,"+e.y+"px,0)")+(s?" scale("+s+")":"")},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),s=L.Layer?this._map._latLngBoundsToNewLayerBounds(this._map.getBounds(),t.zoom,t.center).min:this._map._getCenterOffset(t.center)._multiplyBy(-i).subtract(this._map._getMapPanePos());L.DomUtil.setTransform(this._canvas,s,i)}}),L.canvasLayer=function(){return new L.CanvasLayer}}},i={};function s(e){var n=i[e];if(void 0!==n)return n.exports;var a=i[e]={exports:{}};return t[e](a,a.exports,s),a.exports}(()=>{"use strict";var t=6378137,i=.0066943799901413165,e=484813681109536e-20,n=Math.PI/2,a=1e-10,r=.017453292519943295,o=57.29577951308232,h=Math.PI/4,l=2*Math.PI,u=3.14159265359;const c={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},f={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var d=/[\s_\-\/\(\)]/g;function g(t,i){if(t[i])return t[i];for(var s,e=Object.keys(t),n=i.toLowerCase().replace(d,""),a=-1;++a<e.length;)if((s=e[a]).toLowerCase().replace(d,"")===n)return t[s]}function p(t){var i,s,e,n={},a=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var s=i.split("=");return s.push(!0),t[s[0].toLowerCase()]=s[1],t},{}),o={proj:"projName",datum:"datumCode",rf:function(t){n.rf=parseFloat(t)},lat_0:function(t){n.lat0=t*r},lat_1:function(t){n.lat1=t*r},lat_2:function(t){n.lat2=t*r},lat_ts:function(t){n.lat_ts=t*r},lon_0:function(t){n.long0=t*r},lon_1:function(t){n.long1=t*r},lon_2:function(t){n.long2=t*r},alpha:function(t){n.alpha=parseFloat(t)*r},gamma:function(t){n.rectified_grid_angle=parseFloat(t)*r},lonc:function(t){n.longc=t*r},x_0:function(t){n.x0=parseFloat(t)},y_0:function(t){n.y0=parseFloat(t)},k_0:function(t){n.k0=parseFloat(t)},k:function(t){n.k0=parseFloat(t)},a:function(t){n.a=parseFloat(t)},b:function(t){n.b=parseFloat(t)},r:function(t){n.a=n.b=parseFloat(t)},r_a:function(){n.R_A=!0},zone:function(t){n.zone=parseInt(t,10)},south:function(){n.utmSouth=!0},towgs84:function(t){n.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){n.to_meter=parseFloat(t)},units:function(t){n.units=t;var i=g(f,t);i&&(n.to_meter=i.to_meter)},from_greenwich:function(t){n.from_greenwich=t*r},pm:function(t){var i=g(c,t);n.from_greenwich=(i||parseFloat(t))*r},nadgrids:function(t){"@null"===t?n.datumCode="none":n.nadgrids=t},axis:function(t){var i="ewnsud";3===t.length&&-1!==i.indexOf(t.substr(0,1))&&-1!==i.indexOf(t.substr(1,1))&&-1!==i.indexOf(t.substr(2,1))&&(n.axis=t)},approx:function(){n.approx=!0}};for(i in a)s=a[i],i in o?"function"==typeof(e=o[i])?e(s):n[e]=s:n[i]=s;return"string"==typeof n.datumCode&&"WGS84"!==n.datumCode&&(n.datumCode=n.datumCode.toLowerCase()),n}const m=class{static getId(t){const i=t.find(t=>Array.isArray(t)&&"ID"===t[0]);return i&&i.length>=3?{authority:i[1],code:parseInt(i[2],10)}:null}static convertUnit(t,i="unit"){if(!t||t.length<3)return{type:i,name:"unknown",conversion_factor:null};const s=t[1],e=parseFloat(t[2])||null,n=t.find(t=>Array.isArray(t)&&"ID"===t[0]);return{type:i,name:s,conversion_factor:e,id:n?{authority:n[1],code:parseInt(n[2],10)}:null}}static convertAxis(t){const i=t[1]||"Unknown";let s;const e=i.match(/^\((.)\)$/);if(e){const t=e[1].toUpperCase();if("E"===t)s="east";else if("N"===t)s="north";else{if("U"!==t)throw new Error(`Unknown axis abbreviation: ${t}`);s="up"}}else s=t[2]?t[2].toLowerCase():"unknown";const n=t.find(t=>Array.isArray(t)&&"ORDER"===t[0]),a=n?parseInt(n[1],10):null,r=t.find(t=>Array.isArray(t)&&("LENGTHUNIT"===t[0]||"ANGLEUNIT"===t[0]||"SCALEUNIT"===t[0]));return{name:i,direction:s,unit:this.convertUnit(r),order:a}}static extractAxes(t){return t.filter(t=>Array.isArray(t)&&"AXIS"===t[0]).map(t=>this.convertAxis(t)).sort((t,i)=>(t.order||0)-(i.order||0))}static convert(t,i={}){switch(t[0]){case"PROJCRS":i.type="ProjectedCRS",i.name=t[1],i.base_crs=t.find(t=>Array.isArray(t)&&"BASEGEOGCRS"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"BASEGEOGCRS"===t[0])):null,i.conversion=t.find(t=>Array.isArray(t)&&"CONVERSION"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"CONVERSION"===t[0])):null;const s=t.find(t=>Array.isArray(t)&&"CS"===t[0]);s&&(i.coordinate_system={type:s[1],axis:this.extractAxes(t)});const e=t.find(t=>Array.isArray(t)&&"LENGTHUNIT"===t[0]);if(e){const t=this.convertUnit(e);i.coordinate_system.unit=t}i.id=this.getId(t);break;case"BASEGEOGCRS":case"GEOGCRS":i.type="GeographicCRS",i.name=t[1];const n=t.find(t=>Array.isArray(t)&&("DATUM"===t[0]||"ENSEMBLE"===t[0]));if(n){const s=this.convert(n);"ENSEMBLE"===n[0]?i.datum_ensemble=s:i.datum=s;const e=t.find(t=>Array.isArray(t)&&"PRIMEM"===t[0]);e&&"Greenwich"!==e[1]&&(s.prime_meridian={name:e[1],longitude:parseFloat(e[2])})}i.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(t)},i.id=this.getId(t);break;case"DATUM":i.type="GeodeticReferenceFrame",i.name=t[1],i.ellipsoid=t.find(t=>Array.isArray(t)&&"ELLIPSOID"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"ELLIPSOID"===t[0])):null;break;case"ENSEMBLE":i.type="DatumEnsemble",i.name=t[1],i.members=t.filter(t=>Array.isArray(t)&&"MEMBER"===t[0]).map(t=>({type:"DatumEnsembleMember",name:t[1],id:this.getId(t)}));const a=t.find(t=>Array.isArray(t)&&"ENSEMBLEACCURACY"===t[0]);a&&(i.accuracy=parseFloat(a[1]));const r=t.find(t=>Array.isArray(t)&&"ELLIPSOID"===t[0]);r&&(i.ellipsoid=this.convert(r)),i.id=this.getId(t);break;case"ELLIPSOID":i.type="Ellipsoid",i.name=t[1],i.semi_major_axis=parseFloat(t[2]),i.inverse_flattening=parseFloat(t[3]),t.find(t=>Array.isArray(t)&&"LENGTHUNIT"===t[0])&&this.convert(t.find(t=>Array.isArray(t)&&"LENGTHUNIT"===t[0]),i);break;case"CONVERSION":i.type="Conversion",i.name=t[1],i.method=t.find(t=>Array.isArray(t)&&"METHOD"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"METHOD"===t[0])):null,i.parameters=t.filter(t=>Array.isArray(t)&&"PARAMETER"===t[0]).map(t=>this.convert(t));break;case"METHOD":i.type="Method",i.name=t[1],i.id=this.getId(t);break;case"PARAMETER":i.type="Parameter",i.name=t[1],i.value=parseFloat(t[2]),i.unit=this.convertUnit(t.find(t=>Array.isArray(t)&&("LENGTHUNIT"===t[0]||"ANGLEUNIT"===t[0]||"SCALEUNIT"===t[0]))),i.id=this.getId(t);break;case"BOUNDCRS":i.type="BoundCRS";const o=t.find(t=>Array.isArray(t)&&"SOURCECRS"===t[0]);if(o){const t=o.find(t=>Array.isArray(t));i.source_crs=t?this.convert(t):null}const h=t.find(t=>Array.isArray(t)&&"TARGETCRS"===t[0]);if(h){const t=h.find(t=>Array.isArray(t));i.target_crs=t?this.convert(t):null}const l=t.find(t=>Array.isArray(t)&&"ABRIDGEDTRANSFORMATION"===t[0]);i.transformation=l?this.convert(l):null;break;case"ABRIDGEDTRANSFORMATION":if(i.type="Transformation",i.name=t[1],i.method=t.find(t=>Array.isArray(t)&&"METHOD"===t[0])?this.convert(t.find(t=>Array.isArray(t)&&"METHOD"===t[0])):null,i.parameters=t.filter(t=>Array.isArray(t)&&("PARAMETER"===t[0]||"PARAMETERFILE"===t[0])).map(t=>"PARAMETER"===t[0]?this.convert(t):"PARAMETERFILE"===t[0]?{name:t[1],value:t[2],id:{authority:"EPSG",code:8656}}:void 0),7===i.parameters.length){const t=i.parameters[6];"Scale difference"===t.name&&(t.value=Math.round(1e12*(t.value-1))/1e6)}i.id=this.getId(t);break;case"AXIS":i.coordinate_system||(i.coordinate_system={type:"unspecified",axis:[]}),i.coordinate_system.axis.push(this.convertAxis(t));break;case"LENGTHUNIT":const u=this.convertUnit(t,"LinearUnit");i.coordinate_system&&i.coordinate_system.axis&&i.coordinate_system.axis.forEach(t=>{t.unit||(t.unit=u)}),u.conversion_factor&&1!==u.conversion_factor&&i.semi_major_axis&&(i.semi_major_axis={value:i.semi_major_axis,unit:u});break;default:i.keyword=t[0]}return i}},_=class extends m{static convert(t,i={}){return super.convert(t,i),i.coordinate_system&&"Cartesian"===i.coordinate_system.subtype&&delete i.coordinate_system,i.usage&&delete i.usage,i}},y=class extends m{static convert(t,i={}){super.convert(t,i);const s=t.find(t=>Array.isArray(t)&&"CS"===t[0]);s&&(i.coordinate_system={subtype:s[1],axis:this.extractAxes(t)});const e=t.find(t=>Array.isArray(t)&&"USAGE"===t[0]);if(e){const t=e.find(t=>Array.isArray(t)&&"SCOPE"===t[0]),s=e.find(t=>Array.isArray(t)&&"AREA"===t[0]),n=e.find(t=>Array.isArray(t)&&"BBOX"===t[0]);i.usage={},t&&(i.usage.scope=t[1]),s&&(i.usage.area=s[1]),n&&(i.usage.bbox=n.slice(1))}return i}};var v=1,M=/\s/,w=/[A-Za-z]/,x=/[A-Za-z84_]/,E=/[,\]]/,b=/[\d\.E\-\+]/;function S(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=v}function G(t,i,s){Array.isArray(i)&&(s.unshift(i),i=null);var e=i?{}:t,n=s.reduce(function(t,i){return P(i,t),t},e);i&&(t[i]=n)}function P(t,i){if(Array.isArray(t)){var s=t.shift();if("PARAMETER"===s&&(s=t.shift()),1===t.length)return Array.isArray(t[0])?(i[s]={},void P(t[0],i[s])):void(i[s]=t[0]);if(t.length)if("TOWGS84"!==s){if("AXIS"===s)return s in i||(i[s]=[]),void i[s].push(t);var e;switch(Array.isArray(s)||(i[s]={}),s){case"UNIT":case"PRIMEM":case"VERT_DATUM":return i[s]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&P(t[2],i[s]));case"SPHEROID":case"ELLIPSOID":return i[s]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&P(t[3],i[s]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return t[0]=["name",t[0]],void G(i,s,t);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return t[0]=["name",t[0]],G(i,s,t),void(i[s].type=s);default:for(e=-1;++e<t.length;)if(!Array.isArray(t[e]))return P(t,i[s]);return G(i,s,t)}}else i[s]=t;else i[s]=!0}else i[t]=!0}function C(t){return.017453292519943295*t}function A(t){const i=(t.projName||"").toLowerCase().replace(/_/g," ");t.long0||!t.longc||"albers conic equal area"!==i&&"lambert azimuthal equal area"!==i||(t.long0=t.longc),t.lat_ts||!t.lat1||"stereographic south pole"!==i&&"polar stereographic (variant b)"!==i?t.lat_ts||!t.lat0||"polar stereographic"!==i&&"polar stereographic (variant a)"!==i||(t.lat_ts=t.lat0,t.lat0=C(t.lat0>0?90:-90),delete t.lat1):(t.lat0=C(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1)}function N(t){let i={units:null,to_meter:void 0};return"string"==typeof t?(i.units=t.toLowerCase(),"metre"===i.units&&(i.units="meter"),"meter"===i.units&&(i.to_meter=1)):t&&t.name&&(i.units=t.name.toLowerCase(),"metre"===i.units&&(i.units="meter"),i.to_meter=t.conversion_factor),i}function k(t){return"object"==typeof t?t.value*t.unit.conversion_factor:t}function I(t,i){t.ellipsoid.radius?(i.a=t.ellipsoid.radius,i.rf=0):(i.a=k(t.ellipsoid.semi_major_axis),void 0!==t.ellipsoid.inverse_flattening?i.rf=t.ellipsoid.inverse_flattening:void 0!==t.ellipsoid.semi_major_axis&&void 0!==t.ellipsoid.semi_minor_axis&&(i.rf=i.a/(i.a-k(t.ellipsoid.semi_minor_axis))))}function z(t,i={}){return t&&"object"==typeof t?"BoundCRS"===t.type?(z(t.source_crs,i),t.transformation&&(t.transformation.method&&"NTv2"===t.transformation.method.name?i.nadgrids=t.transformation.parameters[0].value:i.datum_params=t.transformation.parameters.map(t=>t.value)),i):(Object.keys(t).forEach(s=>{const e=t[s];if(null!==e)switch(s){case"name":if(i.srsCode)break;i.name=e,i.srsCode=e;break;case"type":"GeographicCRS"===e?i.projName="longlat":"ProjectedCRS"===e&&t.conversion&&t.conversion.method&&(i.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":e.ellipsoid&&(i.ellps=e.ellipsoid.name,I(e,i)),e.prime_meridian&&(i.from_greenwich=e.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":i.ellps=e.name,I(e,i);break;case"prime_meridian":i.long0=(e.longitude||0)*Math.PI/180;break;case"coordinate_system":if(e.axis)if(i.axis=e.axis.map(t=>{const i=t.direction;if("east"===i)return"e";if("north"===i)return"n";if("west"===i)return"w";if("south"===i)return"s";throw new Error(`Unknown axis direction: ${i}`)}).join("")+"u",e.unit){const{units:t,to_meter:s}=N(e.unit);i.units=t,i.to_meter=s}else if(e.axis[0]&&e.axis[0].unit){const{units:t,to_meter:s}=N(e.axis[0].unit);i.units=t,i.to_meter=s}break;case"id":e.authority&&e.code&&(i.title=e.authority+":"+e.code);break;case"conversion":e.method&&e.method.name&&(i.projName=e.method.name),e.parameters&&e.parameters.forEach(t=>{const s=t.name.toLowerCase().replace(/\s+/g,"_"),e=t.value;t.unit&&t.unit.conversion_factor?i[s]=e*t.unit.conversion_factor:"degree"===t.unit?i[s]=e*Math.PI/180:i[s]=e});break;case"unit":e.name&&(i.units=e.name.toLowerCase(),"metre"===i.units&&(i.units="meter")),e.conversion_factor&&(i.to_meter=e.conversion_factor);break;case"base_crs":z(e,i),i.datumCode=e.id?e.id.authority+"_"+e.id.code:e.name}}),void 0!==i.latitude_of_false_origin&&(i.lat0=i.latitude_of_false_origin),void 0!==i.longitude_of_false_origin&&(i.long0=i.longitude_of_false_origin),void 0!==i.latitude_of_standard_parallel&&(i.lat0=i.latitude_of_standard_parallel,i.lat1=i.latitude_of_standard_parallel),void 0!==i.latitude_of_1st_standard_parallel&&(i.lat1=i.latitude_of_1st_standard_parallel),void 0!==i.latitude_of_2nd_standard_parallel&&(i.lat2=i.latitude_of_2nd_standard_parallel),void 0!==i.latitude_of_projection_centre&&(i.lat0=i.latitude_of_projection_centre),void 0!==i.longitude_of_projection_centre&&(i.longc=i.longitude_of_projection_centre),void 0!==i.easting_at_false_origin&&(i.x0=i.easting_at_false_origin),void 0!==i.northing_at_false_origin&&(i.y0=i.northing_at_false_origin),void 0!==i.latitude_of_natural_origin&&(i.lat0=i.latitude_of_natural_origin),void 0!==i.longitude_of_natural_origin&&(i.long0=i.longitude_of_natural_origin),void 0!==i.longitude_of_origin&&(i.long0=i.longitude_of_origin),void 0!==i.false_easting&&(i.x0=i.false_easting),i.easting_at_projection_centre&&(i.x0=i.easting_at_projection_centre),void 0!==i.false_northing&&(i.y0=i.false_northing),i.northing_at_projection_centre&&(i.y0=i.northing_at_projection_centre),void 0!==i.standard_parallel_1&&(i.lat1=i.standard_parallel_1),void 0!==i.standard_parallel_2&&(i.lat2=i.standard_parallel_2),void 0!==i.scale_factor_at_natural_origin&&(i.k0=i.scale_factor_at_natural_origin),void 0!==i.scale_factor_at_projection_centre&&(i.k0=i.scale_factor_at_projection_centre),void 0!==i.scale_factor_on_pseudo_standard_parallel&&(i.k0=i.scale_factor_on_pseudo_standard_parallel),void 0!==i.azimuth&&(i.alpha=i.azimuth),void 0!==i.azimuth_at_projection_centre&&(i.alpha=i.azimuth_at_projection_centre),i.angle_from_rectified_to_skew_grid&&(i.rectified_grid_angle=i.angle_from_rectified_to_skew_grid),A(i),i):t}S.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;M.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case v:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},S.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(E.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},S.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=v)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=v,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},S.prototype.number=function(t){if(!b.test(t)){if(E.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},S.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},S.prototype.keyword=function(t){if(x.test(t))this.word+=t;else{if("["===t){var i=[];return i.push(this.word),this.level++,null===this.root?this.root=i:this.currentObject.push(i),this.stack.push(this.currentObject),this.currentObject=i,void(this.state=v)}if(!E.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},S.prototype.neutral=function(t){if(w.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(b.test(t))return this.word=t,void(this.state=3);if(!E.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},S.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var R=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function T(t){for(var i=Object.keys(t),s=0,e=i.length;s<e;++s){var n=i[s];-1!==R.indexOf(n)&&O(t[n]),"object"==typeof t[n]&&T(t[n])}}function O(t){if(t.AUTHORITY){var i=Object.keys(t.AUTHORITY)[0];i&&i in t.AUTHORITY&&(t.title=i+":"+t.AUTHORITY[i])}if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var s="",e=0,n=t.AXIS.length;e<n;++e){var a=[t.AXIS[e][0].toLowerCase(),t.AXIS[e][1].toLowerCase()];-1!==a[0].indexOf("north")||("y"===a[0]||"lat"===a[0])&&"north"===a[1]?s+="n":-1!==a[0].indexOf("south")||("y"===a[0]||"lat"===a[0])&&"south"===a[1]?s+="s":-1!==a[0].indexOf("east")||("x"===a[0]||"lon"===a[0])&&"east"===a[1]?s+="e":-1===a[0].indexOf("west")&&("x"!==a[0]&&"lon"!==a[0]||"west"!==a[1])||(s+="w")}2===s.length&&(s+="u"),3===s.length&&(t.axis=s)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var r=t.GEOGCS;function o(i){return i*(t.to_meter||1)}"GEOGCS"===t.type&&(r=t),r&&(r.DATUM?t.datumCode=r.DATUM.name.toLowerCase():t.datumCode=r.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_1949"===t.datumCode&&(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"belge_1972"===t.datumCode&&(t.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(t.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=r.DATUM.SPHEROID.a,t.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(t.datum_params=r.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=C(t.rectified_grid_angle)),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",C],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",C],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",C],["lat0","latitude_of_origin",C],["lat0","standard_parallel_1",C],["lat1","standard_parallel_1",C],["lat2","standard_parallel_2",C],["azimuth","Azimuth"],["alpha","azimuth",C],["srsCode","name"]].forEach(function(i){return function(t,i){var s=i[0],e=i[1];!(s in t)&&e in t&&(t[s]=t[e],3===i.length&&(t[s]=i[2](t[s])))}(t,i)}),A(t)}function q(t){if("object"==typeof t)return z(t);const i=function(t){const i=t.toUpperCase();return i.includes("PROJCRS")||i.includes("GEOGCRS")||i.includes("BOUNDCRS")||i.includes("VERTCRS")||i.includes("LENGTHUNIT")||i.includes("ANGLEUNIT")||i.includes("SCALEUNIT")?"WKT2":(i.includes("PROJCS")||i.includes("GEOGCS")||i.includes("LOCAL_CS")||i.includes("VERT_CS")||i.includes("UNIT"),"WKT1")}(t);var s=new S(t).output();if("WKT2"===i)return z(function(t){const i=function(t){return t.find(t=>Array.isArray(t)&&"USAGE"===t[0])?"2019":(t.find(t=>Array.isArray(t)&&"CS"===t[0])||"BOUNDCRS"===t[0]||"PROJCRS"===t[0]||t[0],"2015")}(t);return("2019"===i?y:_).convert(t)}(s));var e=s[0],n={};return P(s,n),T(n),n[e]}function F(t){var i=this;if(2===arguments.length){var s=arguments[1];"string"==typeof s?"+"===s.charAt(0)?F[t]=p(arguments[1]):F[t]=q(arguments[1]):F[t]=s}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){return Array.isArray(t)?F.apply(i,t):F(t)});if("string"==typeof t){if(t in F)return F[t]}else"EPSG"in t?F["EPSG:"+t.EPSG]=t:"ESRI"in t?F["ESRI:"+t.ESRI]=t:"IAU2000"in t?F["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var i=1;i<=60;++i)t("EPSG:"+(32600+i),"+proj=utm +zone="+i+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+i),"+proj=utm +zone="+i+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(F);const j=F;var B=["3857","900913","3785","102113"];function D(t,i){var s,e;if(t=t||{},!i)return t;for(e in i)void 0!==(s=i[e])&&(t[e]=s);return t}function U(t,i,s){var e=t*i;return s/Math.sqrt(1-e*e)}function H(t){return t<0?-1:1}function W(t){return Math.abs(t)<=u?t:t-H(t)*l}function X(t,i,s){var e=t*s,a=.5*t;return e=Math.pow((1-e)/(1+e),a),Math.tan(.5*(n-i))/e}function Z(t,i){for(var s,e,a=.5*t,r=n-2*Math.atan(i),o=0;o<=15;o++)if(s=t*Math.sin(r),r+=e=n-2*Math.atan(i*Math.pow((1-s)/(1+s),a))-r,Math.abs(e)<=1e-10)return r;return-9999}function $(t){return t}var V=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=U(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var i,s,e=t.x,r=t.y;if(r*o>90&&r*o<-90&&e*o>180&&e*o<-180)return null;if(Math.abs(Math.abs(r)-n)<=a)return null;if(this.sphere)i=this.x0+this.a*this.k0*W(e-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(h+.5*r));else{var l=Math.sin(r),u=X(this.e,r,l);i=this.x0+this.a*this.k0*W(e-this.long0),s=this.y0-this.a*this.k0*Math.log(u)}return t.x=i,t.y=s,t},inverse:function(t){var i,s,e=t.x-this.x0,a=t.y-this.y0;if(this.sphere)s=n-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var r=Math.exp(-a/(this.a*this.k0));if(-9999===(s=Z(this.e,r)))return null}return i=W(this.long0+e/(this.a*this.k0)),t.x=i,t.y=s,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"]},{init:function(){},forward:$,inverse:$,names:["longlat","identity"]}],Y={},Q=[];function K(t,i){var s=Q.length;return t.names?(Q[s]=t,t.names.forEach(function(t){Y[t.toLowerCase()]=s}),this):(console.log(i),!0)}function J(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}const tt={start:function(){V.forEach(K)},add:K,get:function(t){if(!t)return!1;var i=t.toLowerCase();return void 0!==Y[i]&&Q[Y[i]]||(i=J(i))in Y&&Q[Y[i]]?Q[Y[i]]:void 0}},it={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},st=it.WGS84;var et={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var nt in et){var at=et[nt];at.datumName&&(et[at.datumName]=at)}const rt=et;var ot={};async function ht(t,i){for(var s=[],e=await i.getImageCount(),n=e-1;n>=0;n--){var a=await i.getImage(n),r=await a.readRasters(),o=[a.getWidth(),a.getHeight()],h=a.getBoundingBox().map(ut),l=[a.fileDirectory.ModelPixelScale[0],a.fileDirectory.ModelPixelScale[1]].map(ut),u=h[0]+(o[0]-1)*l[0],c=h[3]-(o[1]-1)*l[1],f=r[0],d=r[1],g=[];for(let t=o[1]-1;t>=0;t--)for(let i=o[0]-1;i>=0;i--){var p=t*o[0]+i;g.push([-ct(d[p]),ct(f[p])])}s.push({del:l,lim:o,ll:[-u,c],cvs:g})}var m={header:{nSubgrids:e},subgrids:s};return ot[t]=m,m}function lt(t){if(0===t.length)return null;var i="@"===t[0];return i&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!i,grid:null,isNull:!0}:{name:t,mandatory:!i,grid:ot[t]||null,isNull:!1}}function ut(t){return t*Math.PI/180}function ct(t){return t/3600*Math.PI/180}function ft(t,i,s){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(i,s)))}function dt(t){return t.map(function(t){return[ct(t.longitudeShift),ct(t.latitudeShift)]})}function gt(t,i,s){return{name:ft(t,i+8,i+16).trim(),parent:ft(t,i+24,i+24+8).trim(),lowerLatitude:t.getFloat64(i+72,s),upperLatitude:t.getFloat64(i+88,s),lowerLongitude:t.getFloat64(i+104,s),upperLongitude:t.getFloat64(i+120,s),latitudeInterval:t.getFloat64(i+136,s),longitudeInterval:t.getFloat64(i+152,s),gridNodeCount:t.getInt32(i+168,s)}}function pt(t,i,s,e,n){var a=i+176,r=16;!1===n&&(r=8);for(var o=[],h=0;h<s.gridNodeCount;h++){var l={latitudeShift:t.getFloat32(a+h*r,e),longitudeShift:t.getFloat32(a+h*r+4,e)};!1!==n&&(l.latitudeAccuracy=t.getFloat32(a+h*r+8,e),l.longitudeAccuracy=t.getFloat32(a+h*r+12,e)),o.push(l)}return o}function mt(t,i){if(!(this instanceof mt))return new mt(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,i=i||function(t){if(t)throw t};var s=function(t){if(!function(t){return"string"==typeof t}(t))return"projName"in t?t:q(t);if(function(t){return t in j}(t))return j[t];if(function(t){return 0!==t.indexOf("+")&&-1!==t.indexOf("[")||"object"==typeof t&&!("srsCode"in t)}(t)){var i=q(t);if(function(t){var i=g(t,"authority");if(i){var s=g(i,"epsg");return s&&B.indexOf(s)>-1}}(i))return j["EPSG:3857"];var s=function(t){var i=g(t,"extension");if(i)return g(i,"proj4")}(i);return s?p(s):i}return function(t){return"+"===t[0]}(t)?p(t):void 0}(t);if("object"==typeof s){var n=mt.projections.get(s.projName);if(n){if(s.datumCode&&"none"!==s.datumCode){var r=g(rt,s.datumCode);r&&(s.datum_params=s.datum_params||(r.towgs84?r.towgs84.split(","):null),s.ellps=r.ellipse,s.datumName=r.datumName?r.datumName:s.datumCode)}s.k0=s.k0||1,s.axis=s.axis||"enu",s.ellps=s.ellps||"wgs84",s.lat1=s.lat1||s.lat0;var o,h,l,u,c,f,d=function(t,i,s,e,n){if(!t){var r=g(it,e);r||(r=st),t=r.a,i=r.b,s=r.rf}return s&&!i&&(i=(1-1/s)*t),(0===s||Math.abs(t-i)<a)&&(n=!0,i=t),{a:t,b:i,rf:s,sphere:n}}(s.a,s.b,s.rf,s.ellps,s.sphere),m=(o=d.a,h=d.b,d.rf,c=((l=o*o)-(u=h*h))/l,f=0,s.R_A?(l=(o*=1-c*(.16666666666666666+c*(.04722222222222222+.022156084656084655*c)))*o,c=0):f=Math.sqrt(c),{es:c,e:f,ep2:(l-u)/u}),_=function(t){return void 0===t?null:t.split(",").map(lt)}(s.nadgrids),y=s.datum||function(t,i,s,n,a,r,o){var h={};return h.datum_type=void 0===t||"none"===t?5:4,i&&(h.datum_params=i.map(parseFloat),0===h.datum_params[0]&&0===h.datum_params[1]&&0===h.datum_params[2]||(h.datum_type=1),h.datum_params.length>3&&(0===h.datum_params[3]&&0===h.datum_params[4]&&0===h.datum_params[5]&&0===h.datum_params[6]||(h.datum_type=2,h.datum_params[3]*=e,h.datum_params[4]*=e,h.datum_params[5]*=e,h.datum_params[6]=h.datum_params[6]/1e6+1))),o&&(h.datum_type=3,h.grids=o),h.a=s,h.b=n,h.es=a,h.ep2=r,h}(s.datumCode,s.datum_params,d.a,d.b,m.es,m.ep2,_);D(this,s),D(this,n),this.a=d.a,this.b=d.b,this.rf=d.rf,this.sphere=d.sphere,this.es=m.es,this.e=m.e,this.ep2=m.ep2,this.datum=y,"init"in this&&"function"==typeof this.init&&this.init(),i(null,this)}else i("Could not get projection name from: "+t)}else i("Could not parse to valid json: "+t)}mt.projections=tt,mt.projections.start();const _t=mt;function yt(t,i,s){var e,a,r,o,h=t.x,l=t.y,u=t.z?t.z:0;if(l<-n&&l>-1.001*n)l=-n;else if(l>n&&l<1.001*n)l=n;else{if(l<-n)return{x:-1/0,y:-1/0,z:t.z};if(l>n)return{x:1/0,y:1/0,z:t.z}}return h>Math.PI&&(h-=2*Math.PI),a=Math.sin(l),o=Math.cos(l),r=a*a,{x:((e=s/Math.sqrt(1-i*r))+u)*o*Math.cos(h),y:(e+u)*o*Math.sin(h),z:(e*(1-i)+u)*a}}function vt(t,i,s,e){var n,a,r,o,h,l,u,c,f,d,g,p,m,_,y,v=t.x,M=t.y,w=t.z?t.z:0;if(n=Math.sqrt(v*v+M*M),a=Math.sqrt(v*v+M*M+w*w),n/s<1e-12){if(_=0,a/s<1e-12)return y=-e,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(M,v);r=w/a,c=(o=n/a)*(1-i)*(h=1/Math.sqrt(1-i*(2-i)*o*o)),f=r*h,m=0;do{m++,l=i*(u=s/Math.sqrt(1-i*f*f))/(u+(y=n*c+w*f-u*(1-i*f*f))),p=(g=r*(h=1/Math.sqrt(1-l*(2-l)*o*o)))*c-(d=o*(1-l)*h)*f,c=d,f=g}while(p*p>1e-24&&m<30);return{x:_,y:Math.atan(g/Math.abs(d)),z:y}}function Mt(t){return 1===t||2===t}function wt(t,i,s){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var e={x:-s.x,y:s.y},n={x:Number.NaN,y:Number.NaN},a=[];t:for(var r=0;r<t.grids.length;r++){var h=t.grids[r];if(a.push(h.name),h.isNull){n=e;break}if(null!==h.grid)for(var l=h.grid.subgrids,u=0,c=l.length;u<c;u++){var f=l[u],d=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,g=f.ll[0]-d,p=f.ll[1]-d,m=f.ll[0]+(f.lim[0]-1)*f.del[0]+d,_=f.ll[1]+(f.lim[1]-1)*f.del[1]+d;if(!(p>e.y||g>e.x||_<e.y||m<e.x||(n=xt(e,i,f),isNaN(n.x))))break t}else if(h.mandatory)return console.log("Unable to find mandatory grid '"+h.name+"'"),-1}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-e.x*o+" "+e.y*o+" tried: '"+a+"'"),-1):(s.x=-n.x,s.y=n.y,0)}function xt(t,i,s){var e={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return e;var n={x:t.x,y:t.y};n.x-=s.ll[0],n.y-=s.ll[1],n.x=W(n.x-Math.PI)+Math.PI;var a=Et(n,s);if(i){if(isNaN(a.x))return e;a.x=n.x-a.x,a.y=n.y-a.y;var r,o,h=9;do{if(o=Et(a,s),isNaN(o.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}r={x:n.x-(o.x+a.x),y:n.y-(o.y+a.y)},a.x+=r.x,a.y+=r.y}while(h--&&Math.abs(r.x)>1e-12&&Math.abs(r.y)>1e-12);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),e;e.x=W(a.x+s.ll[0]),e.y=a.y+s.ll[1]}else isNaN(a.x)||(e.x=t.x+a.x,e.y=t.y+a.y);return e}function Et(t,i){var s,e={x:t.x/i.del[0],y:t.y/i.del[1]},n=Math.floor(e.x),a=Math.floor(e.y),r=e.x-1*n,o=e.y-1*a,h={x:Number.NaN,y:Number.NaN};if(n<0||n>=i.lim[0])return h;if(a<0||a>=i.lim[1])return h;s=a*i.lim[0]+n;var l=i.cvs[s][0],u=i.cvs[s][1];s++;var c=i.cvs[s][0],f=i.cvs[s][1];s+=i.lim[0];var d=i.cvs[s][0],g=i.cvs[s][1];s--;var p=i.cvs[s][0],m=i.cvs[s][1],_=r*o,y=r*(1-o),v=(1-r)*(1-o),M=(1-r)*o;return h.x=v*l+y*c+M*p+_*d,h.y=v*u+y*f+M*m+_*g,h}function bt(t,i,s){var e,n,a,r=s.x,o=s.y,h=s.z||0,l={};for(a=0;a<3;a++)if(!i||2!==a||void 0!==s.z)switch(0===a?(e=r,n=-1!=="ew".indexOf(t.axis[a])?"x":"y"):1===a?(e=o,n=-1!=="ns".indexOf(t.axis[a])?"y":"x"):(e=h,n="z"),t.axis[a]){case"e":case"n":l[n]=e;break;case"w":case"s":l[n]=-e;break;case"u":void 0!==s[n]&&(l.z=e);break;case"d":void 0!==s[n]&&(l.z=-e);break;default:return null}return l}function St(t){var i={x:t[0],y:t[1]};return t.length>2&&(i.z=t[2]),t.length>3&&(i.m=t[3]),i}function Gt(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Pt(s,e,n,a){var h,l=void 0!==(n=Array.isArray(n)?St(n):{x:n.x,y:n.y,z:n.z,m:n.m}).z;if(function(t){Gt(t.x),Gt(t.y)}(n),s.datum&&e.datum&&function(t,i){return(1===t.datum.datum_type||2===t.datum.datum_type||3===t.datum.datum_type)&&"WGS84"!==i.datumCode||(1===i.datum.datum_type||2===i.datum.datum_type||3===i.datum.datum_type)&&"WGS84"!==t.datumCode}(s,e)&&(n=Pt(s,h=new _t("WGS84"),n,a),s=h),a&&"enu"!==s.axis&&(n=bt(s,!1,n)),"longlat"===s.projName)n={x:n.x*r,y:n.y*r,z:n.z||0};else if(s.to_meter&&(n={x:n.x*s.to_meter,y:n.y*s.to_meter,z:n.z||0}),!(n=s.inverse(n)))return;if(s.from_greenwich&&(n.x+=s.from_greenwich),n=function(s,e,n){if(function(t,i){return t.datum_type===i.datum_type&&!(t.a!==i.a||Math.abs(t.es-i.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===i.datum_params[0]&&t.datum_params[1]===i.datum_params[1]&&t.datum_params[2]===i.datum_params[2]:2!==t.datum_type||t.datum_params[0]===i.datum_params[0]&&t.datum_params[1]===i.datum_params[1]&&t.datum_params[2]===i.datum_params[2]&&t.datum_params[3]===i.datum_params[3]&&t.datum_params[4]===i.datum_params[4]&&t.datum_params[5]===i.datum_params[5]&&t.datum_params[6]===i.datum_params[6])}(s,e))return n;if(5===s.datum_type||5===e.datum_type)return n;var a=s.a,r=s.es;if(3===s.datum_type){if(0!==wt(s,!1,n))return;a=t,r=i}var o=e.a,h=e.b,l=e.es;return 3===e.datum_type&&(o=t,h=6356752.314,l=i),r!==l||a!==o||Mt(s.datum_type)||Mt(e.datum_type)?(n=yt(n,r,a),Mt(s.datum_type)&&(n=function(t,i,s){if(1===i)return{x:t.x+s[0],y:t.y+s[1],z:t.z+s[2]};if(2===i){var e=s[0],n=s[1],a=s[2],r=s[3],o=s[4],h=s[5],l=s[6];return{x:l*(t.x-h*t.y+o*t.z)+e,y:l*(h*t.x+t.y-r*t.z)+n,z:l*(-o*t.x+r*t.y+t.z)+a}}}(n,s.datum_type,s.datum_params)),Mt(e.datum_type)&&(n=function(t,i,s){if(1===i)return{x:t.x-s[0],y:t.y-s[1],z:t.z-s[2]};if(2===i){var e=s[0],n=s[1],a=s[2],r=s[3],o=s[4],h=s[5],l=s[6],u=(t.x-e)/l,c=(t.y-n)/l,f=(t.z-a)/l;return{x:u+h*c-o*f,y:-h*u+c+r*f,z:o*u-r*c+f}}}(n,e.datum_type,e.datum_params)),n=vt(n,l,o,h),3!==e.datum_type||0===wt(e,!0,n)?n:void 0):n}(s.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*o,y:n.y*o,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),a&&"enu"!==e.axis?bt(e,!0,n):(n&&!l&&delete n.z,n)}var Ct=_t("WGS84");function At(t,i,s,e){var n,a,r;return Array.isArray(s)?(n=Pt(t,i,s,e)||{x:NaN,y:NaN},s.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==i.name&&"geocent"===i.name?"number"==typeof n.z?[n.x,n.y,n.z].concat(s.slice(3)):[n.x,n.y,s[2]].concat(s.slice(3)):[n.x,n.y].concat(s.slice(2)):[n.x,n.y]):(a=Pt(t,i,s,e),2===(r=Object.keys(s)).length||r.forEach(function(e){if(void 0!==t.name&&"geocent"===t.name||void 0!==i.name&&"geocent"===i.name){if("x"===e||"y"===e||"z"===e)return}else if("x"===e||"y"===e)return;a[e]=s[e]}),a)}function Nt(t){return t instanceof _t?t:"object"==typeof t&&"oProj"in t?t.oProj:_t(t)}var kt="AJSAJS",It="AFAFAF",zt=65,Rt=73,Tt=79;const Ot={forward:Lt,inverse:function(t){var i=Bt(Ut(t.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat,i.lon,i.lat]:[i.left,i.bottom,i.right,i.top]},toPoint:qt};function Lt(t,i){return i=i||5,function(t,i){var s,e,n,a,r,o,h,l,u,c,f,d="00000"+t.easting,g="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(u=t.easting,c=t.northing,f=Dt(t.zoneNumber),s=Math.floor(u/1e5),e=Math.floor(c/1e5)%20,a=kt.charCodeAt(n=f-1),r=It.charCodeAt(n),l=!1,(o=a+s-1)>90&&(o=o-90+zt-1,l=!0),(o===Rt||a<Rt&&o>Rt||(o>Rt||a<Rt)&&l)&&o++,(o===Tt||a<Tt&&o>Tt||(o>Tt||a<Tt)&&l)&&++o===Rt&&o++,o>90&&(o=o-90+zt-1),(h=r+e)>86?(h=h-86+zt-1,l=!0):l=!1,(h===Rt||r<Rt&&h>Rt||(h>Rt||r<Rt)&&l)&&h++,(h===Tt||r<Tt&&h>Tt||(h>Tt||r<Tt)&&l)&&++h===Rt&&h++,h>86&&(h=h-86+zt-1),String.fromCharCode(o)+String.fromCharCode(h))+d.substr(d.length-5,i)+g.substr(g.length-5,i)}(function(t){var i,s,e,n,a,r,o,h=t.lat,l=t.lon,u=6378137,c=.00669438,f=.9996,d=Ft(h),g=Ft(l);o=Math.floor((l+180)/6)+1,180===l&&(o=60),h>=56&&h<64&&l>=3&&l<12&&(o=32),h>=72&&h<84&&(l>=0&&l<9?o=31:l>=9&&l<21?o=33:l>=21&&l<33?o=35:l>=33&&l<42&&(o=37)),r=Ft(6*(o-1)-180+3),i=.006739496752268451,s=u/Math.sqrt(1-c*Math.sin(d)*Math.sin(d)),e=Math.tan(d)*Math.tan(d),n=i*Math.cos(d)*Math.cos(d);var p,m,_=f*s*((a=Math.cos(d)*(g-r))+(1-e+n)*a*a*a/6+(5-18*e+e*e+72*n-58*i)*a*a*a*a*a/120)+5e5,y=f*(u*(.9983242984503243*d-.002514607064228144*Math.sin(2*d)+2639046602129982e-21*Math.sin(4*d)-3.418046101696858e-9*Math.sin(6*d))+s*Math.tan(d)*(a*a/2+(5-e+9*n+4*n*n)*a*a*a*a/24+(61-58*e+e*e+600*n-2.2240339282485886)*a*a*a*a*a*a/720));return h<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(_),zoneNumber:o,zoneLetter:(p=h,m="Z",84>=p&&p>=72?m="X":72>p&&p>=64?m="W":64>p&&p>=56?m="V":56>p&&p>=48?m="U":48>p&&p>=40?m="T":40>p&&p>=32?m="S":32>p&&p>=24?m="R":24>p&&p>=16?m="Q":16>p&&p>=8?m="P":8>p&&p>=0?m="N":0>p&&p>=-8?m="M":-8>p&&p>=-16?m="L":-16>p&&p>=-24?m="K":-24>p&&p>=-32?m="J":-32>p&&p>=-40?m="H":-40>p&&p>=-48?m="G":-48>p&&p>=-56?m="F":-56>p&&p>=-64?m="E":-64>p&&p>=-72?m="D":-72>p&&p>=-80&&(m="C"),m)}}({lat:t[1],lon:t[0]}),i)}function qt(t){var i=Bt(Ut(t.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat]:[(i.left+i.right)/2,(i.top+i.bottom)/2]}function Ft(t){return t*(Math.PI/180)}function jt(t){return t/Math.PI*180}function Bt(t){var i=t.northing,s=t.easting,e=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var a,r,o,h,l,u,c,f,d,g=.9996,p=6378137,m=.00669438,_=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),y=s-5e5,v=i;e<"N"&&(v-=1e7),c=6*(n-1)-180+3,a=.006739496752268451,d=(f=v/g/6367449.145945056)+(3*_/2-27*_*_*_/32)*Math.sin(2*f)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*f)+151*_*_*_/96*Math.sin(6*f),r=p/Math.sqrt(1-m*Math.sin(d)*Math.sin(d)),o=Math.tan(d)*Math.tan(d),h=a*Math.cos(d)*Math.cos(d),l=.99330562*p/Math.pow(1-m*Math.sin(d)*Math.sin(d),1.5),u=y/(r*g);var M=d-r*Math.tan(d)/l*(u*u/2-(5+3*o+10*h-4*h*h-9*a)*u*u*u*u/24+(61+90*o+298*h+45*o*o-1.6983531815716497-3*h*h)*u*u*u*u*u*u/720);M=jt(M);var w,x=(u-(1+2*o+h)*u*u*u/6+(5-2*h+28*o-3*h*h+8*a+24*o*o)*u*u*u*u*u/120)/Math.cos(d);if(x=c+jt(x),t.accuracy){var E=Bt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:E.lat,right:E.lon,bottom:M,left:x}}else w={lat:M,lon:x};return w}function Dt(t){var i=t%6;return 0===i&&(i=6),i}function Ut(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var i,s=t.length,e=null,n="",a=0;!/[A-Z]/.test(i=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;n+=i,a++}var r=parseInt(n,10);if(0===a||a+3>s)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(a++);if(o<="A"||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+t;e=t.substring(a,a+=2);for(var h=Dt(r),l=function(t,i){for(var s=kt.charCodeAt(i-1),e=1e5,n=!1;s!==t.charCodeAt(0);){if(++s===Rt&&s++,s===Tt&&s++,s>90){if(n)throw"Bad character: "+t;s=zt,n=!0}e+=1e5}return e}(e.charAt(0),h),u=function(t,i){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var s=It.charCodeAt(i-1),e=0,n=!1;s!==t.charCodeAt(0);){if(++s===Rt&&s++,s===Tt&&s++,s>86){if(n)throw"Bad character: "+t;s=zt,n=!0}e+=1e5}return e}(e.charAt(1),h);u<Ht(o);)u+=2e6;var c=s-a;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,d,g,p=c/2,m=0,_=0;return p>0&&(f=1e5/Math.pow(10,p),d=t.substring(a,a+p),m=parseFloat(d)*f,g=t.substring(a+p),_=parseFloat(g)*f),{easting:m+l,northing:_+u,zoneLetter:o,zoneNumber:r,accuracy:f}}function Ht(t){var i;switch(t){case"C":i=11e5;break;case"D":i=2e6;break;case"E":i=28e5;break;case"F":i=37e5;break;case"G":i=46e5;break;case"H":i=55e5;break;case"J":i=64e5;break;case"K":i=73e5;break;case"L":i=82e5;break;case"M":i=91e5;break;case"N":i=0;break;case"P":i=8e5;break;case"Q":i=17e5;break;case"R":i=26e5;break;case"S":i=35e5;break;case"T":i=44e5;break;case"U":i=53e5;break;case"V":i=62e5;break;case"W":i=7e6;break;case"X":i=79e5;break;default:i=-1}if(i>=0)return i;throw"Invalid zone letter: "+t}function Wt(t,i,s){if(!(this instanceof Wt))return new Wt(t,i,s);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===i){var e=t.split(",");this.x=parseFloat(e[0]),this.y=parseFloat(e[1]),this.z=parseFloat(e[2])||0}else this.x=t,this.y=i,this.z=s||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Wt.fromMGRS=function(t){return new Wt(qt(t))},Wt.prototype.toMGRS=function(t){return Lt([this.x,this.y],t)};const Xt=Wt;var Zt=.046875,$t=.01953125,Vt=.01068115234375;function Yt(t){var i=[];i[0]=1-t*(.25+t*(Zt+t*($t+t*Vt))),i[1]=t*(.75-t*(Zt+t*($t+t*Vt)));var s=t*t;return i[2]=s*(.46875-t*(.013020833333333334+.007120768229166667*t)),s*=t,i[3]=s*(.3645833333333333-.005696614583333333*t),i[4]=s*t*.3076171875,i}function Qt(t,i,s,e){return s*=i,i*=i,e[0]*t-s*(e[1]+i*(e[2]+i*(e[3]+i*e[4])))}function Kt(t,i,s){for(var e=1/(1-i),n=t,r=20;r;--r){var o=Math.sin(n),h=1-i*o*o;if(n-=h=(Qt(n,o,Math.cos(n),s)-t)*(h*Math.sqrt(h))*e,Math.abs(h)<a)return n}return n}const Jt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Yt(this.es),this.ml0=Qt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var i,s,e,n=t.x,r=t.y,o=W(n-this.long0),h=Math.sin(r),l=Math.cos(r);if(this.es){var u=l*o,c=Math.pow(u,2),f=this.ep2*Math.pow(l,2),d=Math.pow(f,2),g=Math.abs(l)>a?Math.tan(r):0,p=Math.pow(g,2),m=Math.pow(p,2);i=1-this.es*Math.pow(h,2),u/=Math.sqrt(i);var _=Qt(r,h,l,this.en);s=this.a*(this.k0*u*(1+c/6*(1-p+f+c/20*(5-18*p+m+14*f-58*p*f+c/42*(61+179*m-m*p-479*p)))))+this.x0,e=this.a*(this.k0*(_-this.ml0+h*o*u/2*(1+c/12*(5-p+9*f+4*d+c/30*(61+m-58*p+270*f-330*p*f+c/56*(1385+543*m-m*p-3111*p))))))+this.y0}else{var y=l*Math.sin(o);if(Math.abs(Math.abs(y)-1)<a)return 93;if(s=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,e=l*Math.cos(o)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(e))>=1){if(y-1>a)return 93;e=0}else e=Math.acos(e);r<0&&(e=-e),e=this.a*this.k0*(e-this.lat0)+this.y0}return t.x=s,t.y=e,t},inverse:function(t){var i,s,e,r,o=(t.x-this.x0)*(1/this.a),h=(t.y-this.y0)*(1/this.a);if(this.es)if(s=Kt(i=this.ml0+h/this.k0,this.es,this.en),Math.abs(s)<n){var l=Math.sin(s),u=Math.cos(s),c=Math.abs(u)>a?Math.tan(s):0,f=this.ep2*Math.pow(u,2),d=Math.pow(f,2),g=Math.pow(c,2),p=Math.pow(g,2);i=1-this.es*Math.pow(l,2);var m=o*Math.sqrt(i)/this.k0,_=Math.pow(m,2);e=s-(i*=c)*_/(1-this.es)*.5*(1-_/12*(5+3*g-9*f*g+f-4*d-_/30*(61+90*g-252*f*g+45*p+46*f-_/56*(1385+3633*g+4095*p+1574*p*g)))),r=W(this.long0+m*(1-_/6*(1+2*g+f-_/20*(5+28*g+24*p+8*f*g+6*f-_/42*(61+662*g+1320*p+720*p*g))))/u)}else e=n*H(h),r=0;else{var y=Math.exp(o/this.k0),v=.5*(y-1/y),M=this.lat0+h/this.k0,w=Math.cos(M);i=Math.sqrt((1-Math.pow(w,2))/(1+Math.pow(v,2))),e=Math.asin(i),h<0&&(e=-e),r=0===v&&0===w?0:W(Math.atan2(v,w)+this.long0)}return t.x=r,t.y=e,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function ti(t){var i=Math.exp(t);return(i-1/i)/2}function ii(t,i){t=Math.abs(t),i=Math.abs(i);var s=Math.max(t,i),e=Math.min(t,i)/(s||1);return s*Math.sqrt(1+Math.pow(e,2))}function si(t,i){for(var s,e=2*Math.cos(2*i),n=t.length-1,a=t[n],r=0;--n>=0;)s=e*a-r+t[n],r=a,a=s;return i+s*Math.sin(2*i)}function ei(t,i,s){for(var e,n,a=Math.sin(i),r=Math.cos(i),o=ti(s),h=function(t){var i=Math.exp(t);return(i+1/i)/2}(s),l=2*r*h,u=-2*a*o,c=t.length-1,f=t[c],d=0,g=0,p=0;--c>=0;)e=g,n=d,f=l*(g=f)-e-u*(d=p)+t[c],p=u*g-n+l*d;return[(l=a*h)*f-(u=r*o)*p,l*p+u*f]}const ni={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Jt.init.apply(this),this.forward=Jt.forward,this.inverse=Jt.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),i=t/(2-t),s=i;this.cgb[0]=i*(2+i*(-2/3+i*(i*(116/45+i*(26/45+i*(-2854/675)))-2))),this.cbg[0]=i*(i*(2/3+i*(4/3+i*(-82/45+i*(32/45+i*(4642/4725)))))-2),s*=i,this.cgb[1]=s*(7/3+i*(i*(-227/45+i*(2704/315+i*(2323/945)))-1.6)),this.cbg[1]=s*(5/3+i*(-16/15+i*(-13/9+i*(904/315+i*(-1522/945))))),s*=i,this.cgb[2]=s*(56/15+i*(-136/35+i*(-1262/105+i*(73814/2835)))),this.cbg[2]=s*(-26/15+i*(34/21+i*(1.6+i*(-12686/2835)))),s*=i,this.cgb[3]=s*(4279/630+i*(-332/35+i*(-399572/14175))),this.cbg[3]=s*(1237/630+i*(i*(-24832/14175)-2.4)),s*=i,this.cgb[4]=s*(4174/315+i*(-144838/6237)),this.cbg[4]=s*(-734/315+i*(109598/31185)),s*=i,this.cgb[5]=s*(601676/22275),this.cbg[5]=s*(444337/155925),s=Math.pow(i,2),this.Qn=this.k0/(1+i)*(1+s*(1/4+s*(1/64+s/256))),this.utg[0]=i*(i*(2/3+i*(-37/96+i*(1/360+i*(81/512+i*(-96199/604800)))))-.5),this.gtu[0]=i*(.5+i*(-2/3+i*(5/16+i*(41/180+i*(-127/288+i*(7891/37800)))))),this.utg[1]=s*(-1/48+i*(-1/15+i*(437/1440+i*(-46/105+i*(1118711/3870720))))),this.gtu[1]=s*(13/48+i*(i*(557/1440+i*(281/630+i*(-1983433/1935360)))-.6)),s*=i,this.utg[2]=s*(-17/480+i*(37/840+i*(209/4480+i*(-5569/90720)))),this.gtu[2]=s*(61/240+i*(-103/140+i*(15061/26880+i*(167603/181440)))),s*=i,this.utg[3]=s*(-4397/161280+i*(11/504+i*(830251/7257600))),this.gtu[3]=s*(49561/161280+i*(-179/168+i*(6601661/7257600))),s*=i,this.utg[4]=s*(-4583/161280+i*(108847/3991680)),this.gtu[4]=s*(34729/80640+i*(-3418889/1995840)),s*=i,this.utg[5]=s*(-20648693/638668800),this.gtu[5]=.6650675310896665*s;var e=si(this.cbg,this.lat0);this.Zb=-this.Qn*(e+function(t,i){for(var s,e=2*Math.cos(i),n=t.length-1,a=t[n],r=0;--n>=0;)s=e*a-r+t[n],r=a,a=s;return Math.sin(i)*s}(this.gtu,2*e))},forward:function(t){var i=W(t.x-this.long0),s=t.y;s=si(this.cbg,s);var e=Math.sin(s),n=Math.cos(s),a=Math.sin(i),r=Math.cos(i);s=Math.atan2(e,r*n),i=Math.atan2(a*n,ii(e,n*r)),i=function(t){var i=Math.abs(t);return i=function(t){var i=1+t,s=i-1;return 0===s?t:t*Math.log(i)/s}(i*(1+i/(ii(1,i)+1))),t<0?-i:i}(Math.tan(i));var o,h,l=ei(this.gtu,2*s,2*i);return s+=l[0],i+=l[1],Math.abs(i)<=2.623395162778?(o=this.a*(this.Qn*i)+this.x0,h=this.a*(this.Qn*s+this.Zb)+this.y0):(o=1/0,h=1/0),t.x=o,t.y=h,t},inverse:function(t){var i,s,e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);if(n=(n-this.Zb)/this.Qn,e/=this.Qn,Math.abs(e)<=2.623395162778){var a=ei(this.utg,2*n,2*e);n+=a[0],e+=a[1],e=Math.atan(ti(e));var r=Math.sin(n),o=Math.cos(n),h=Math.sin(e),l=Math.cos(e);n=Math.atan2(r*l,ii(h,l*o)),i=W((e=Math.atan2(h,l*o))+this.long0),s=si(this.cgb,n)}else i=1/0,s=1/0;return t.x=i,t.y=s,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]},ai={init:function(){var t=function(t,i){if(void 0===t){if((t=Math.floor(30*(W(i)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*r,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ni.init.apply(this),this.forward=ni.forward,this.inverse=ni.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function ri(t,i){return Math.pow((1-t)/(1+t),i)}const oi={init:function(){var t=Math.sin(this.lat0),i=Math.cos(this.lat0);i*=i,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*i*i/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+h)/(Math.pow(Math.tan(.5*this.lat0+h),this.C)*ri(this.e*t,this.ratexp))},forward:function(t){var i=t.x,s=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*s+h),this.C)*ri(this.e*Math.sin(s),this.ratexp))-n,t.x=this.C*i,t},inverse:function(t){for(var i=t.x/this.C,s=t.y,e=Math.pow(Math.tan(.5*s+h)/this.K,1/this.C),a=20;a>0&&(s=2*Math.atan(e*ri(this.e*Math.sin(t.y),-.5*this.e))-n,!(Math.abs(s-t.y)<1e-14));--a)t.y=s;return a?(t.x=i,t.y=s,t):null},names:["gauss"]},hi={init:function(){oi.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var i,s,e,n;return t.x=W(t.x-this.long0),oi.forward.apply(this,[t]),i=Math.sin(t.y),s=Math.cos(t.y),e=Math.cos(t.x),n=this.k0*this.R2/(1+this.sinc0*i+this.cosc0*s*e),t.x=n*s*Math.sin(t.x),t.y=n*(this.cosc0*i-this.sinc0*s*e),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var i,s,e,n,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=ii(t.x,t.y)){var r=2*Math.atan2(a,this.R2);i=Math.sin(r),s=Math.cos(r),n=Math.asin(s*this.sinc0+t.y*i*this.cosc0/a),e=Math.atan2(t.x*i,a*this.cosc0*s-t.y*this.sinc0*i)}else n=this.phic0,e=0;return t.x=e,t.y=n,oi.inverse.apply(this,[t]),t.x=W(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};function li(t,i,s){return i*=s,Math.tan(.5*(n+t))*Math.pow((1-i)/(1+i),.5*s)}const ui={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=a&&(this.k0=.5*(1+H(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=a&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=a&&Math.abs(Math.cos(this.lat_ts))>a&&(this.k0=.5*this.cons*U(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/X(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=U(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(li(this.lat0,this.sinlat0,this.e))-n,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var i,s,e,r,o,h,l=t.x,u=t.y,c=Math.sin(u),f=Math.cos(u),d=W(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=a&&Math.abs(u+this.lat0)<=a?(t.x=NaN,t.y=NaN,t):this.sphere?(i=2*this.k0/(1+this.sinlat0*c+this.coslat0*f*Math.cos(d)),t.x=this.a*i*f*Math.sin(d)+this.x0,t.y=this.a*i*(this.coslat0*c-this.sinlat0*f*Math.cos(d))+this.y0,t):(s=2*Math.atan(li(u,c,this.e))-n,r=Math.cos(s),e=Math.sin(s),Math.abs(this.coslat0)<=a?(o=X(this.e,u*this.con,this.con*c),h=2*this.a*this.k0*o/this.cons,t.x=this.x0+h*Math.sin(l-this.long0),t.y=this.y0-this.con*h*Math.cos(l-this.long0),t):(Math.abs(this.sinlat0)<a?(i=2*this.a*this.k0/(1+r*Math.cos(d)),t.y=i*e):(i=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*e+this.cosX0*r*Math.cos(d))),t.y=i*(this.cosX0*e-this.sinX0*r*Math.cos(d))+this.y0),t.x=i*r*Math.sin(d)+this.x0,t))},inverse:function(t){var i,s,e,r,o;t.x-=this.x0,t.y-=this.y0;var h=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var l=2*Math.atan(h/(2*this.a*this.k0));return i=this.long0,s=this.lat0,h<=a?(t.x=i,t.y=s,t):(s=Math.asin(Math.cos(l)*this.sinlat0+t.y*Math.sin(l)*this.coslat0/h),i=Math.abs(this.coslat0)<a?this.lat0>0?W(this.long0+Math.atan2(t.x,-1*t.y)):W(this.long0+Math.atan2(t.x,t.y)):W(this.long0+Math.atan2(t.x*Math.sin(l),h*this.coslat0*Math.cos(l)-t.y*this.sinlat0*Math.sin(l))),t.x=i,t.y=s,t)}if(Math.abs(this.coslat0)<=a){if(h<=a)return s=this.lat0,i=this.long0,t.x=i,t.y=s,t;t.x*=this.con,t.y*=this.con,e=h*this.cons/(2*this.a*this.k0),s=this.con*Z(this.e,e),i=this.con*W(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(h*this.cosX0/(2*this.a*this.k0*this.ms1)),i=this.long0,h<=a?o=this.X0:(o=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/h),i=W(this.long0+Math.atan2(t.x*Math.sin(r),h*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),s=-1*Z(this.e,Math.tan(.5*(n+o)));return t.x=i,t.y=s,t},names:["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"],ssfn_:li},ci={init:function(){var t=this.lat0;this.lambda0=this.long0;var i=Math.sin(t),s=this.a,e=1/this.rf,n=2*e-Math.pow(e,2),a=this.e=Math.sqrt(n);this.R=this.k0*s*Math.sqrt(1-n)/(1-n*Math.pow(i,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(i/this.alpha);var r=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+a*i)/(1-a*i));this.K=r-this.alpha*o+this.alpha*a/2*h},forward:function(t){var i=Math.log(Math.tan(Math.PI/4-t.y/2)),s=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),e=-this.alpha*(i+s)+this.K,n=2*(Math.atan(Math.exp(e))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),r=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(a))),o=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*r+this.x0,t},inverse:function(t){for(var i=t.x-this.x0,s=t.y-this.y0,e=i/this.R,n=2*(Math.atan(Math.exp(s/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(e)),r=Math.atan(Math.sin(e)/(Math.cos(this.b0)*Math.cos(e)-Math.sin(this.b0)*Math.tan(n))),o=this.lambda0+r/this.alpha,h=0,l=a,u=-1e3,c=0;Math.abs(l-u)>1e-7;){if(++c>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),u=l,l=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=o,t.y=l,t},names:["somerc"]};var fi=1e-7;const di={init:function(){var t,i,s,e,r,o,u,c,f,d,g,p,m,_,y=0,v=0,M=0,w=0,x=0,E=0,b=0;this.no_off=(m=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],_="object"==typeof(p=this).projName?Object.keys(p.projName)[0]:p.projName,"no_uoff"in p||"no_off"in p||-1!==m.indexOf(_)||-1!==m.indexOf(J(_))),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var G=!1;if("rectified_grid_angle"in this&&(G=!0),S&&(b=this.alpha),G&&(y=this.rectified_grid_angle),S||G)v=this.longc;else if(M=this.long1,x=this.lat1,w=this.long2,E=this.lat2,Math.abs(x-E)<=fi||(t=Math.abs(x))<=fi||Math.abs(t-n)<=fi||Math.abs(Math.abs(this.lat0)-n)<=fi||Math.abs(Math.abs(E)-n)<=fi)throw new Error;var P=1-this.es;i=Math.sqrt(P),Math.abs(this.lat0)>a?(c=Math.sin(this.lat0),s=Math.cos(this.lat0),t=1-this.es*c*c,this.B=s*s,this.B=Math.sqrt(1+this.es*this.B*this.B/P),this.A=this.B*this.k0*i/t,(r=(e=this.B*i/(s*Math.sqrt(t)))*e-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=e,this.E*=Math.pow(X(this.e,this.lat0,c),this.B)):(this.B=1/i,this.A=this.k0,this.E=e=r=1),S||G?(S?(g=Math.asin(Math.sin(b)/e),G||(y=b)):(g=y,b=Math.asin(e*Math.sin(g))),this.lam0=v-Math.asin(.5*(r-1/r)*Math.tan(g))/this.B):(o=Math.pow(X(this.e,x,Math.sin(x)),this.B),u=Math.pow(X(this.e,E,Math.sin(E)),this.B),r=this.E/o,f=(u-o)/(u+o),d=((d=this.E*this.E)-u*o)/(d+u*o),(t=M-w)<-Math.PI?w-=l:t>Math.PI&&(w+=l),this.lam0=W(.5*(M+w)-Math.atan(d*Math.tan(.5*this.B*(M-w))/f)/this.B),g=Math.atan(2*Math.sin(this.B*W(M-this.lam0))/(r-1/r)),y=b=Math.asin(e*Math.sin(g))),this.singam=Math.sin(g),this.cosgam=Math.cos(g),this.sinrot=Math.sin(y),this.cosrot=Math.cos(y),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(e*e-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*g,this.v_pole_n=this.ArB*Math.log(Math.tan(h-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(h+r))},forward:function(t){var i,s,e,r,o,h,l,u,c={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-n)>a){if(i=.5*((o=this.E/Math.pow(X(this.e,t.y,Math.sin(t.y)),this.B))-(h=1/o)),s=.5*(o+h),r=Math.sin(this.B*t.x),e=(i*this.singam-r*this.cosgam)/s,Math.abs(Math.abs(e)-1)<a)throw new Error;u=.5*this.ArB*Math.log((1-e)/(1+e)),h=Math.cos(this.B*t.x),l=Math.abs(h)<fi?this.A*t.x:this.ArB*Math.atan2(i*this.cosgam+r*this.singam,h)}else u=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(c.x=l,c.y=u):(l-=this.u_0,c.x=u*this.cosrot+l*this.sinrot,c.y=l*this.cosrot-u*this.sinrot),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function(t){var i,s,e,r,o,h,l,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(s=t.y,i=t.x):(s=t.x*this.cosrot-t.y*this.sinrot,i=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((e=Math.exp(-this.BrA*s))-1/e),o=.5*(e+1/e),l=((h=Math.sin(this.BrA*i))*this.cosgam+r*this.singam)/o,Math.abs(Math.abs(l)-1)<a)u.x=0,u.y=l<0?-n:n;else{if(u.y=this.E/Math.sqrt((1+l)/(1-l)),u.y=Z(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(r*this.cosgam-h*this.singam,Math.cos(this.BrA*i))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},gi={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<a)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var i=Math.sin(this.lat1),s=Math.cos(this.lat1),e=U(this.e,i,s),r=X(this.e,this.lat1,i),o=Math.sin(this.lat2),h=Math.cos(this.lat2),l=U(this.e,o,h),u=X(this.e,this.lat2,o),c=Math.abs(Math.abs(this.lat0)-n)<a?0:X(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>a?this.ns=Math.log(e/l)/Math.log(r/u):this.ns=i,isNaN(this.ns)&&(this.ns=i),this.f0=e/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var i=t.x,s=t.y;Math.abs(2*Math.abs(s)-Math.PI)<=a&&(s=H(s)*(n-2e-10));var e,r,o=Math.abs(Math.abs(s)-n);if(o>a)e=X(this.e,s,Math.sin(s)),r=this.a*this.f0*Math.pow(e,this.ns);else{if((o=s*this.ns)<=0)return null;r=0}var h=this.ns*W(i-this.long0);return t.x=this.k0*(r*Math.sin(h))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(h))+this.y0,t},inverse:function(t){var i,s,e,a,r,o=(t.x-this.x0)/this.k0,h=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(i=Math.sqrt(o*o+h*h),s=1):(i=-Math.sqrt(o*o+h*h),s=-1);var l=0;if(0!==i&&(l=Math.atan2(s*o,s*h)),0!==i||this.ns>0){if(s=1/this.ns,e=Math.pow(i/(this.a*this.f0),s),-9999===(a=Z(this.e,e)))return null}else a=-n;return r=W(l/this.ns+this.long0),t.x=r,t.y=a,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},pi={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var i,s,e,n,a,r,o,h=t.x,l=t.y,u=W(h-this.long0);return i=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),s=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/i)-this.s45),e=-u*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(s)+Math.sin(this.ad)*Math.cos(s)*Math.cos(e)),a=Math.asin(Math.cos(s)*Math.sin(e)/Math.cos(n)),r=this.n*a,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),t.y=o*Math.cos(r)/1,t.x=o*Math.sin(r)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var i,s,e,n,a,r,o,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.atan2(t.y,t.x)/Math.sin(this.s0),e=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),i=Math.asin(Math.cos(this.ad)*Math.sin(e)-Math.sin(this.ad)*Math.cos(e)*Math.cos(n)),s=Math.asin(Math.cos(e)*Math.sin(n)/Math.cos(i)),t.x=this.long0-s/this.alfa,r=i,o=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(i/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r)),this.e/2))-this.s45),Math.abs(r-t.y)<1e-10&&(o=1),r=t.y,l+=1}while(0===o&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function mi(t,i,s,e,n){return t*n-i*Math.sin(2*n)+s*Math.sin(4*n)-e*Math.sin(6*n)}function _i(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function yi(t){return.375*t*(1+.25*t*(1+.46875*t))}function vi(t){return.05859375*t*t*(1+.75*t)}function Mi(t){return t*t*t*(35/3072)}function wi(t,i,s){var e=i*s;return t/Math.sqrt(1-e*e)}function xi(t){return Math.abs(t)<n?t:t-H(t)*Math.PI}function Ei(t,i,s,e,n){var a,r;a=t/i;for(var o=0;o<15;o++)if(a+=r=(t-(i*a-s*Math.sin(2*a)+e*Math.sin(4*a)-n*Math.sin(6*a)))/(i-2*s*Math.cos(2*a)+4*e*Math.cos(4*a)-6*n*Math.cos(6*a)),Math.abs(r)<=1e-10)return a;return NaN}const bi={init:function(){this.sphere||(this.e0=_i(this.es),this.e1=yi(this.es),this.e2=vi(this.es),this.e3=Mi(this.es),this.ml0=this.a*mi(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var i,s,e=t.x,n=t.y;if(e=W(e-this.long0),this.sphere)i=this.a*Math.asin(Math.cos(n)*Math.sin(e)),s=this.a*(Math.atan2(Math.tan(n),Math.cos(e))-this.lat0);else{var a=Math.sin(n),r=Math.cos(n),o=wi(this.a,this.e,a),h=Math.tan(n)*Math.tan(n),l=e*Math.cos(n),u=l*l,c=this.es*r*r/(1-this.es);i=o*l*(1-u*h*(1/6-(8-h+8*c)*u/120)),s=this.a*mi(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+o*a/r*u*(.5+(5-h+6*c)*u/24)}return t.x=i+this.x0,t.y=s+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var i,s,e=t.x/this.a,r=t.y/this.a;if(this.sphere){var o=r+this.lat0;i=Math.asin(Math.sin(o)*Math.cos(e)),s=Math.atan2(Math.tan(e),Math.cos(o))}else{var h=Ei(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-n)<=a)return t.x=this.long0,t.y=n,r<0&&(t.y*=-1),t;var l=wi(this.a,this.e,Math.sin(h)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(h),2),f=e*this.a/l,d=f*f;i=h-l*Math.tan(h)/u*f*f*(.5-(1+3*c)*f*f/24),s=f*(1-d*(c/3+(1+3*c)*c*d/15))/Math.cos(h)}return t.x=W(s+this.long0),t.y=xi(i),t},names:["Cassini","Cassini_Soldner","cass"]};function Si(t,i){var s;return t>1e-7?(1-t*t)*(i/(1-(s=t*i)*s)-.5/t*Math.log((1-s)/(1+s))):2*i}const Gi={init:function(){var t,i=Math.abs(this.lat0);if(Math.abs(i-n)<a?this.mode=this.lat0<0?1:2:Math.abs(i)<a?this.mode=3:this.mode=4,this.es>0)switch(this.qp=Si(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var i,s=[];return s[0]=.3333333333333333*t,i=t*t,s[0]+=.17222222222222222*i,s[1]=.06388888888888888*i,i*=t,s[0]+=.10257936507936508*i,s[1]+=.0664021164021164*i,s[2]=.016415012942191543*i,s}(this.es),this.mode){case 2:case 1:this.dd=1;break;case 3:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case 4:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Si(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else 4===this.mode&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var i,s,e,r,o,l,u,c,f,d,g=t.x,p=t.y;if(g=W(g-this.long0),this.sphere){if(o=Math.sin(p),d=Math.cos(p),e=Math.cos(g),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((s=this.mode===this.EQUIT?1+d*e:1+this.sinph0*o+this.cosph0*d*e)<=a)return null;i=(s=Math.sqrt(2/s))*d*Math.sin(g),s*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*d*e}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),Math.abs(p+this.lat0)<a)return null;s=h-.5*p,i=(s=2*(this.mode===this.S_POLE?Math.cos(s):Math.sin(s)))*Math.sin(g),s*=e}}else{switch(u=0,c=0,f=0,e=Math.cos(g),r=Math.sin(g),o=Math.sin(p),l=Si(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(u=l/this.qp,c=Math.sqrt(1-u*u)),this.mode){case this.OBLIQ:f=1+this.sinb1*u+this.cosb1*c*e;break;case this.EQUIT:f=1+c*e;break;case this.N_POLE:f=n+p,l=this.qp-l;break;case this.S_POLE:f=p-n,l=this.qp+l}if(Math.abs(f)<a)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:f=Math.sqrt(2/f),s=this.mode===this.OBLIQ?this.ymf*f*(this.cosb1*u-this.sinb1*c*e):(f=Math.sqrt(2/(1+c*e)))*u*this.ymf,i=this.xmf*f*c*r;break;case this.N_POLE:case this.S_POLE:l>=0?(i=(f=Math.sqrt(l))*r,s=e*(this.mode===this.S_POLE?f:-f)):i=s=0}}return t.x=this.a*i+this.x0,t.y=this.a*s+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var i,s,e,r,o,h,l,u,c,f,d=t.x/this.a,g=t.y/this.a;if(this.sphere){var p,m=0,_=0;if((s=.5*(p=Math.sqrt(d*d+g*g)))>1)return null;switch(s=2*Math.asin(s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(_=Math.sin(s),m=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(p)<=a?0:Math.asin(g*_/p),d*=_,g=m*p;break;case this.OBLIQ:s=Math.abs(p)<=a?this.lat0:Math.asin(m*this.sinph0+g*_*this.cosph0/p),d*=_*this.cosph0,g=(m-Math.sin(s)*this.sinph0)*p;break;case this.N_POLE:g=-g,s=n-s;break;case this.S_POLE:s-=n}i=0!==g||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(d,g):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(d/=this.dd,g*=this.dd,(h=Math.sqrt(d*d+g*g))<a)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*h/this.rq),e=Math.cos(r),d*=r=Math.sin(r),this.mode===this.OBLIQ?(l=e*this.sinb1+g*r*this.cosb1/h,o=this.qp*l,g=h*this.cosb1*e-g*this.sinb1*r):(l=g*r/h,o=this.qp*l,g=h*e)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(g=-g),!(o=d*d+g*g))return t.x=this.long0,t.y=this.lat0,t;l=1-o/this.qp,this.mode===this.S_POLE&&(l=-l)}i=Math.atan2(d,g),f=(u=Math.asin(l))+u,s=u+(c=this.apa)[0]*Math.sin(f)+c[1]*Math.sin(f+f)+c[2]*Math.sin(f+f+f)}return t.x=W(this.long0+i),t.y=s,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Pi(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const Ci={init:function(){Math.abs(this.lat1+this.lat2)<a||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=U(this.e3,this.sin_po,this.cos_po),this.qs1=Si(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=U(this.e3,this.sin_po,this.cos_po),this.qs2=Si(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Si(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>a?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var i=t.x,s=t.y;this.sin_phi=Math.sin(s),this.cos_phi=Math.cos(s);var e=Si(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*e)/this.ns0,a=this.ns0*W(i-this.long0),r=n*Math.sin(a)+this.x0,o=this.rh-n*Math.cos(a)+this.y0;return t.x=r,t.y=o,t},inverse:function(t){var i,s,e,n,a,r;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1),n=0,0!==i&&(n=Math.atan2(e*t.x,e*t.y)),e=i*this.ns0/this.a,this.sphere?r=Math.asin((this.c-e*e)/(2*this.ns0)):(s=(this.c-e*e)/this.ns0,r=this.phi1z(this.e3,s)),a=W(n/this.ns0+this.long0),t.x=a,t.y=r,t},names:["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"],phi1z:function(t,i){var s,e,n,r,o=Pi(.5*i);if(t<a)return o;for(var h=t*t,l=1;l<=25;l++)if(o+=r=.5*(n=1-(e=t*(s=Math.sin(o)))*e)*n/Math.cos(o)*(i/(1-h)-s/n+.5/t*Math.log((1-e)/(1+e))),Math.abs(r)<=1e-7)return o;return null}},Ai={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var i,s,e,n,r,o,h,l=t.x,u=t.y;return e=W(l-this.long0),i=Math.sin(u),s=Math.cos(u),n=Math.cos(e),(r=this.sin_p14*i+this.cos_p14*s*n)>0||Math.abs(r)<=a?(o=this.x0+1*this.a*s*Math.sin(e)/r,h=this.y0+1*this.a*(this.cos_p14*i-this.sin_p14*s*n)/r):(o=this.x0+this.infinity_dist*s*Math.sin(e),h=this.y0+this.infinity_dist*(this.cos_p14*i-this.sin_p14*s*n)),t.x=o,t.y=h,t},inverse:function(t){var i,s,e,n,a,r;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(i=Math.sqrt(t.x*t.x+t.y*t.y))?(n=Math.atan2(i,this.rc),s=Math.sin(n),r=Pi((e=Math.cos(n))*this.sin_p14+t.y*s*this.cos_p14/i),a=Math.atan2(t.x*s,i*this.cos_p14*e-t.y*this.sin_p14*s),a=W(this.long0+a)):(r=this.phic0,a=0),t.x=a,t.y=r,t},names:["gnom"]},Ni={init:function(){this.sphere||(this.k0=U(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var i,s,e=t.x,n=t.y,a=W(e-this.long0);if(this.sphere)i=this.x0+this.a*a*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var r=Si(this.e,Math.sin(n));i=this.x0+this.a*this.k0*a,s=this.y0+this.a*r*.5/this.k0}return t.x=i,t.y=s,t},inverse:function(t){var i,s;return t.x-=this.x0,t.y-=this.y0,this.sphere?(i=W(this.long0+t.x/this.a/Math.cos(this.lat_ts)),s=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(s=function(t,i){var s=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(i)-s)<1e-6)return i<0?-1*n:n;for(var e,a,r,o,h=Math.asin(.5*i),l=0;l<30;l++)if(a=Math.sin(h),r=Math.cos(h),o=t*a,h+=e=Math.pow(1-o*o,2)/(2*r)*(i/(1-t*t)-a/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(e)<=1e-10)return h;return NaN}(this.e,2*t.y*this.k0/this.a),i=W(this.long0+t.x/(this.a*this.k0))),t.x=i,t.y=s,t},names:["cea"]},ki={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var i=t.x,s=t.y,e=W(i-this.long0),n=xi(s-this.lat0);return t.x=this.x0+this.a*e*this.rc,t.y=this.y0+this.a*n,t},inverse:function(t){var i=t.x,s=t.y;return t.x=W(this.long0+(i-this.x0)/(this.a*this.rc)),t.y=xi(this.lat0+(s-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"]},Ii={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=_i(this.es),this.e1=yi(this.es),this.e2=vi(this.es),this.e3=Mi(this.es),this.ml0=this.a*mi(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var i,s,e,n=t.x,r=t.y,o=W(n-this.long0);if(e=o*Math.sin(r),this.sphere)Math.abs(r)<=a?(i=this.a*o,s=-1*this.a*this.lat0):(i=this.a*Math.sin(e)/Math.tan(r),s=this.a*(xi(r-this.lat0)+(1-Math.cos(e))/Math.tan(r)));else if(Math.abs(r)<=a)i=this.a*o,s=-1*this.ml0;else{var h=wi(this.a,this.e,Math.sin(r))/Math.tan(r);i=h*Math.sin(e),s=this.a*mi(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+h*(1-Math.cos(e))}return t.x=i+this.x0,t.y=s+this.y0,t},inverse:function(t){var i,s,e,n,r,o,h,l,u;if(e=t.x-this.x0,n=t.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=a)i=W(e/this.a+this.long0),s=0;else{var c;for(o=this.lat0+n/this.a,h=e*e/this.a/this.a+o*o,l=o,r=20;r;--r)if(l+=u=-1*(o*(l*(c=Math.tan(l))+1)-l-.5*(l*l+h)*c)/((l-o)/c-1),Math.abs(u)<=a){s=l;break}i=W(this.long0+Math.asin(e*Math.tan(l)/this.a)/Math.sin(s))}else if(Math.abs(n+this.ml0)<=a)s=0,i=W(this.long0+e/this.a);else{var f,d,g,p,m;for(o=(this.ml0+n)/this.a,h=e*e/this.a/this.a+o*o,l=o,r=20;r;--r)if(m=this.e*Math.sin(l),f=Math.sqrt(1-m*m)*Math.tan(l),d=this.a*mi(this.e0,this.e1,this.e2,this.e3,l),g=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(o*(f*(p=d/this.a)+1)-p-.5*f*(p*p+h))/(this.es*Math.sin(2*l)*(p*p+h-2*o*p)/(4*f)+(o-p)*(f*g-2/Math.sin(2*l))-g),Math.abs(u)<=a){s=l;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(s),2))*Math.tan(s),i=W(this.long0+Math.asin(e*f/this.a)/Math.sin(s))}return t.x=i,t.y=s,t},names:["Polyconic","American_Polyconic","poly"]},zi={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var i,s=t.x,n=t.y-this.lat0,a=s-this.long0,r=n/e*1e-5,o=a,h=1,l=0;for(i=1;i<=10;i++)h*=r,l+=this.A[i]*h;var u,c=l,f=o,d=1,g=0,p=0,m=0;for(i=1;i<=6;i++)u=g*c+d*f,d=d*c-g*f,g=u,p=p+this.B_re[i]*d-this.B_im[i]*g,m=m+this.B_im[i]*d+this.B_re[i]*g;return t.x=m*this.a+this.x0,t.y=p*this.a+this.y0,t},inverse:function(t){var i,s,n=t.x,a=t.y,r=n-this.x0,o=(a-this.y0)/this.a,h=r/this.a,l=1,u=0,c=0,f=0;for(i=1;i<=6;i++)s=u*o+l*h,l=l*o-u*h,u=s,c=c+this.C_re[i]*l-this.C_im[i]*u,f=f+this.C_im[i]*l+this.C_re[i]*u;for(var d=0;d<this.iterations;d++){var g,p=c,m=f,_=o,y=h;for(i=2;i<=6;i++)g=m*c+p*f,p=p*c-m*f,m=g,_+=(i-1)*(this.B_re[i]*p-this.B_im[i]*m),y+=(i-1)*(this.B_im[i]*p+this.B_re[i]*m);p=1,m=0;var v=this.B_re[1],M=this.B_im[1];for(i=2;i<=6;i++)g=m*c+p*f,p=p*c-m*f,m=g,v+=i*(this.B_re[i]*p-this.B_im[i]*m),M+=i*(this.B_im[i]*p+this.B_re[i]*m);var w=v*v+M*M;c=(_*v+y*M)/w,f=(y*v-_*M)/w}var x=c,E=f,b=1,S=0;for(i=1;i<=9;i++)b*=x,S+=this.D[i]*b;var G=this.lat0+S*e*1e5,P=this.long0+E;return t.x=P,t.y=G,t},names:["New_Zealand_Map_Grid","nzmg"]},Ri={init:function(){},forward:function(t){var i=t.x,s=t.y,e=W(i-this.long0),n=this.x0+this.a*e,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+s/2.5))*1.25;return t.x=n,t.y=a,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var i=W(this.long0+t.x/this.a),s=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=i,t.y=s,t},names:["Miller_Cylindrical","mill"]},Ti={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Yt(this.es)},forward:function(t){var i,s,e=t.x,n=t.y;if(e=W(e-this.long0),this.sphere){if(this.m)for(var r=this.n*Math.sin(n),o=20;o;--o){var h=(this.m*n+Math.sin(n)-r)/(this.m+Math.cos(n));if(n-=h,Math.abs(h)<a)break}else n=1!==this.n?Math.asin(this.n*Math.sin(n)):n;i=this.a*this.C_x*e*(this.m+Math.cos(n)),s=this.a*this.C_y*n}else{var l=Math.sin(n),u=Math.cos(n);s=this.a*Qt(n,l,u,this.en),i=this.a*e*u/Math.sqrt(1-this.es*l*l)}return t.x=i,t.y=s,t},inverse:function(t){var i,s,e;return t.x-=this.x0,s=t.x/this.a,t.y-=this.y0,i=t.y/this.a,this.sphere?(i/=this.C_y,s/=this.C_x*(this.m+Math.cos(i)),this.m?i=Pi((this.m*i+Math.sin(i))/this.n):1!==this.n&&(i=Pi(Math.sin(i)/this.n)),s=W(s+this.long0),i=xi(i)):(i=Kt(t.y/this.a,this.es,this.en),(e=Math.abs(i))<n?(e=Math.sin(i),s=W(this.long0+t.x*Math.sqrt(1-this.es*e*e)/(this.a*Math.cos(i)))):e-a<n&&(s=this.long0)),t.x=s,t.y=i,t},names:["Sinusoidal","sinu"]},Oi={init:function(){},forward:function(t){for(var i=t.x,s=t.y,e=W(i-this.long0),n=s,r=Math.PI*Math.sin(s);;){var o=-(n+Math.sin(n)-r)/(1+Math.cos(n));if(n+=o,Math.abs(o)<a)break}n/=2,Math.PI/2-Math.abs(s)<a&&(e=0);var h=.900316316158*this.a*e*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return t.x=h,t.y=l,t},inverse:function(t){var i,s;t.x-=this.x0,t.y-=this.y0,s=t.y/(1.4142135623731*this.a),Math.abs(s)>.999999999999&&(s=.999999999999),i=Math.asin(s);var e=W(this.long0+t.x/(.900316316158*this.a*Math.cos(i)));e<-Math.PI&&(e=-Math.PI),e>Math.PI&&(e=Math.PI),s=(2*i+Math.sin(2*i))/Math.PI,Math.abs(s)>1&&(s=1);var n=Math.asin(s);return t.x=e,t.y=n,t},names:["Mollweide","moll"]},Li={init:function(){Math.abs(this.lat1+this.lat2)<a||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=_i(this.es),this.e1=yi(this.es),this.e2=vi(this.es),this.e3=Mi(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=U(this.e,this.sin_phi,this.cos_phi),this.ml1=mi(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<a?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=U(this.e,this.sin_phi,this.cos_phi),this.ml2=mi(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mi(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var i,s=t.x,e=t.y;if(this.sphere)i=this.a*(this.g-e);else{var n=mi(this.e0,this.e1,this.e2,this.e3,e);i=this.a*(this.g-n)}var a=this.ns*W(s-this.long0),r=this.x0+i*Math.sin(a),o=this.y0+this.rh-i*Math.cos(a);return t.x=r,t.y=o,t},inverse:function(t){var i,s,e,n;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(s=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(s=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1);var a=0;return 0!==s&&(a=Math.atan2(i*t.x,i*t.y)),this.sphere?(n=W(this.long0+a/this.ns),e=xi(this.g-s/this.a),t.x=n,t.y=e,t):(e=Ei(this.g-s/this.a,this.e0,this.e1,this.e2,this.e3),n=W(this.long0+a/this.ns),t.x=n,t.y=e,t)},names:["Equidistant_Conic","eqdc"]},qi={init:function(){this.R=this.a},forward:function(t){var i,s,e=t.x,r=t.y,o=W(e-this.long0);Math.abs(r)<=a&&(i=this.x0+this.R*o,s=this.y0);var h=Pi(2*Math.abs(r/Math.PI));(Math.abs(o)<=a||Math.abs(Math.abs(r)-n)<=a)&&(i=this.x0,s=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*h):this.y0+Math.PI*this.R*-Math.tan(.5*h));var l=.5*Math.abs(Math.PI/o-o/Math.PI),u=l*l,c=Math.sin(h),f=Math.cos(h),d=f/(c+f-1),g=d*d,p=d*(2/c-1),m=p*p,_=Math.PI*this.R*(l*(d-m)+Math.sqrt(u*(d-m)*(d-m)-(m+u)*(g-m)))/(m+u);o<0&&(_=-_),i=this.x0+_;var y=u+d;return _=Math.PI*this.R*(p*y-l*Math.sqrt((m+u)*(u+1)-y*y))/(m+u),s=r>=0?this.y0+_:this.y0-_,t.x=i,t.y=s,t},inverse:function(t){var i,s,e,n,r,o,h,l,u,c,f,d;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,r=(e=t.x/f)*e+(n=t.y/f)*n,f=3*(n*n/(l=-2*(o=-Math.abs(n)*(1+r))+1+2*n*n+r*r)+(2*(h=o-2*n*n+e*e)*h*h/l/l/l-9*o*h/l/l)/27)/(u=(o-h*h/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(f)>1&&(f=f>=0?1:-1),d=Math.acos(f)/3,s=t.y>=0?(-c*Math.cos(d+Math.PI/3)-h/3/l)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-h/3/l)*Math.PI,i=Math.abs(e)<a?this.long0:W(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(e*e-n*n)+r*r))/2/e),t.x=i,t.y=s,t},names:["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"]},Fi={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))},forward:function(t){var i,s,e,r,o,h,l,u,c,f,d,g=t.x,p=t.y,m=Math.sin(t.y),_=Math.cos(t.y),y=W(g-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=a?(t.x=this.x0+this.a*(n-p)*Math.sin(y),t.y=this.y0-this.a*(n-p)*Math.cos(y),t):Math.abs(this.sin_p12+1)<=a?(t.x=this.x0+this.a*(n+p)*Math.sin(y),t.y=this.y0+this.a*(n+p)*Math.cos(y),t):(c=this.sin_p12*m+this.cos_p12*_*Math.cos(y),u=(l=Math.acos(c))?l/Math.sin(l):1,t.x=this.x0+this.a*u*_*Math.sin(y),t.y=this.y0+this.a*u*(this.cos_p12*m-this.sin_p12*_*Math.cos(y)),t):(i=_i(this.es),s=yi(this.es),e=vi(this.es),r=Mi(this.es),Math.abs(this.sin_p12-1)<=a?(o=this.a*mi(i,s,e,r,n),h=this.a*mi(i,s,e,r,p),t.x=this.x0+(o-h)*Math.sin(y),t.y=this.y0-(o-h)*Math.cos(y),t):Math.abs(this.sin_p12+1)<=a?(o=this.a*mi(i,s,e,r,n),h=this.a*mi(i,s,e,r,p),t.x=this.x0+(o+h)*Math.sin(y),t.y=this.y0+(o+h)*Math.cos(y),t):Math.abs(g)<a&&Math.abs(p-this.lat0)<a?(t.x=t.y=0,t):(f=function(t,i,s,e,n,a){const r=e-i,o=Math.atan((1-a)*Math.tan(t)),h=Math.atan((1-a)*Math.tan(s)),l=Math.sin(o),u=Math.cos(o),c=Math.sin(h),f=Math.cos(h);let d,g,p,m,_,y,v,M,w,x,E,b,S,G,P,C=r,A=100;do{if(g=Math.sin(C),p=Math.cos(C),m=Math.sqrt(f*g*(f*g)+(u*c-l*f*p)*(u*c-l*f*p)),0===m)return{azi1:0,s12:0};_=l*c+u*f*p,y=Math.atan2(m,_),v=u*f*g/m,M=1-v*v,w=0!==M?_-2*l*c/M:0,x=a/16*M*(4+a*(4-3*M)),d=C,C=r+(1-x)*a*v*(y+x*m*(w+x*_*(2*w*w-1)))}while(Math.abs(C-d)>1e-12&&--A>0);return 0===A?{azi1:NaN,s12:NaN}:(E=M*(n*n-n*(1-a)*(n*(1-a)))/(n*(1-a)*(n*(1-a))),b=1+E/16384*(4096+E*(E*(320-175*E)-768)),S=E/1024*(256+E*(E*(74-47*E)-128)),G=S*m*(w+S/4*(_*(2*w*w-1)-S/6*w*(4*m*m-3)*(4*w*w-3))),P=n*(1-a)*b*(y-G),{azi1:Math.atan2(f*g,u*c-l*f*p),s12:P})}(this.lat0,this.long0,p,g,this.a,this.f),d=f.azi1,t.x=f.s12*Math.sin(d),t.y=f.s12*Math.cos(d),t))},inverse:function(t){var i,s,e,r,o,h,l,u,c,f,d,g,p,m,_;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((i=Math.sqrt(t.x*t.x+t.y*t.y))>2*n*this.a)return;return s=i/this.a,e=Math.sin(s),r=Math.cos(s),o=this.long0,Math.abs(i)<=a?h=this.lat0:(h=Pi(r*this.sin_p12+t.y*e*this.cos_p12/i),l=Math.abs(this.lat0)-n,o=Math.abs(l)<=a?this.lat0>=0?W(this.long0+Math.atan2(t.x,-t.y)):W(this.long0-Math.atan2(-t.x,t.y)):W(this.long0+Math.atan2(t.x*e,i*this.cos_p12*r-t.y*this.sin_p12*e))),t.x=o,t.y=h,t}return u=_i(this.es),c=yi(this.es),f=vi(this.es),d=Mi(this.es),Math.abs(this.sin_p12-1)<=a?(h=Ei(((g=this.a*mi(u,c,f,d,n))-(i=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,u,c,f,d),o=W(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=h,t):Math.abs(this.sin_p12+1)<=a?(g=this.a*mi(u,c,f,d,n),h=Ei(((i=Math.sqrt(t.x*t.x+t.y*t.y))-g)/this.a,u,c,f,d),o=W(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=h,t):(p=Math.atan2(t.x,t.y),m=Math.sqrt(t.x*t.x+t.y*t.y),_=function(t,i,s,e,n,a){const r=Math.atan((1-a)*Math.tan(t)),o=Math.sin(r),h=Math.cos(r),l=Math.sin(s),u=Math.cos(s),c=Math.atan2(o,h*u),f=h*l,d=1-f*f,g=d*(n*n-n*(1-a)*(n*(1-a)))/(n*(1-a)*(n*(1-a))),p=1+g/16384*(4096+g*(g*(320-175*g)-768)),m=g/1024*(256+g*(g*(74-47*g)-128));let _,y,v,M,w,x=e/(n*(1-a)*p),E=100;do{y=Math.cos(2*c+x),v=Math.sin(x),M=Math.cos(x),w=m*v*(y+m/4*(M*(2*y*y-1)-m/6*y*(4*v*v-3)*(4*y*y-3))),_=x,x=e/(n*(1-a)*p)+w}while(Math.abs(x-_)>1e-12&&--E>0);if(0===E)return{lat2:NaN,lon2:NaN};const b=o*v-h*M*u,S=a/16*d*(4+a*(4-3*d));return{lat2:Math.atan2(o*M+h*v*u,(1-a)*Math.sqrt(f*f+b*b)),lon2:i+(Math.atan2(v*l,h*M-o*v*u)-(1-S)*a*f*(x+S*v*(y+S*M*(2*y*y-1))))}}(this.lat0,this.long0,p,m,this.a,this.f),t.x=_.lon2,t.y=_.lat2,t)},names:["Azimuthal_Equidistant","aeqd"]},ji={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var i,s,e,n,r,o,h,l=t.x,u=t.y;return e=W(l-this.long0),i=Math.sin(u),s=Math.cos(u),n=Math.cos(e),((r=this.sin_p14*i+this.cos_p14*s*n)>0||Math.abs(r)<=a)&&(o=1*this.a*s*Math.sin(e),h=this.y0+1*this.a*(this.cos_p14*i-this.sin_p14*s*n)),t.x=o,t.y=h,t},inverse:function(t){var i,s,e,r,o,h,l;return t.x-=this.x0,t.y-=this.y0,s=Pi((i=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),e=Math.sin(s),r=Math.cos(s),h=this.long0,Math.abs(i)<=a?(l=this.lat0,t.x=h,t.y=l,t):(l=Pi(r*this.sin_p14+t.y*e*this.cos_p14/i),o=Math.abs(this.lat0)-n,Math.abs(o)<=a?(h=this.lat0>=0?W(this.long0+Math.atan2(t.x,-t.y)):W(this.long0-Math.atan2(-t.x,t.y)),t.x=h,t.y=l,t):(h=W(this.long0+Math.atan2(t.x*e,i*this.cos_p14*r-t.y*this.sin_p14*e)),t.x=h,t.y=l,t))},names:["ortho"]};function Bi(t,i,s,e){var r;return t<a?(e.value=1,r=0):(r=Math.atan2(i,s),Math.abs(r)<=h?e.value=1:r>h&&r<=n+h?(e.value=2,r-=n):r>n+h||r<=-(n+h)?(e.value=3,r=r>=0?r-u:r+u):(e.value=4,r+=n)),r}function Di(t,i){var s=t+i;return s<-u?s+=l:s>+u&&(s-=l),s}const Ui={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=n-h/2?this.face=5:this.lat0<=-(n-h/2)?this.face=6:Math.abs(this.long0)<=h?this.face=1:Math.abs(this.long0)<=n+h?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var i,s,e,a,r,o,l={x:0,y:0},c={value:0};if(t.x-=this.long0,i=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,s=t.x,5===this.face)a=n-i,s>=h&&s<=n+h?(c.value=1,e=s-n):s>n+h||s<=-(n+h)?(c.value=2,e=s>0?s-u:s+u):s>-(n+h)&&s<=-h?(c.value=3,e=s+n):(c.value=4,e=s);else if(6===this.face)a=n+i,s>=h&&s<=n+h?(c.value=1,e=-s+n):s<h&&s>=-h?(c.value=2,e=-s):s<-h&&s>=-(n+h)?(c.value=3,e=-s-n):(c.value=4,e=s>0?-s+u:-s-u);else{var f,d,g,p,m,_;2===this.face?s=Di(s,+n):3===this.face?s=Di(s,+u):4===this.face&&(s=Di(s,-n)),p=Math.sin(i),m=Math.cos(i),_=Math.sin(s),f=m*Math.cos(s),d=m*_,g=p,1===this.face?e=Bi(a=Math.acos(f),g,d,c):2===this.face?e=Bi(a=Math.acos(d),g,-f,c):3===this.face?e=Bi(a=Math.acos(-f),g,-d,c):4===this.face?e=Bi(a=Math.acos(-d),g,f,c):(a=e=0,c.value=1)}return o=Math.atan(12/u*(e+Math.acos(Math.sin(e)*Math.cos(h))-n)),r=Math.sqrt((1-Math.cos(a))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(e))))),2===c.value?o+=n:3===c.value?o+=u:4===c.value&&(o+=1.5*u),l.x=r*Math.cos(o),l.y=r*Math.sin(o),l.x=l.x*this.a+this.x0,l.y=l.y*this.a+this.y0,t.x=l.x,t.y=l.y,t},inverse:function(t){var i,s,e,a,r,o,h,l,c,f,d,g,p={lam:0,phi:0},m={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,s=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),i=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?m.value=1:t.y>=0&&t.y>=Math.abs(t.x)?(m.value=2,i-=n):t.x<0&&-t.x>=Math.abs(t.y)?(m.value=3,i=i<0?i+u:i-u):(m.value=4,i+=n),c=u/12*Math.tan(i),r=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),o=Math.atan(r),(h=1-(e=Math.cos(i))*e*(a=Math.tan(s))*a*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?h=-1:h>1&&(h=1),5===this.face)l=Math.acos(h),p.phi=n-l,1===m.value?p.lam=o+n:2===m.value?p.lam=o<0?o+u:o-u:3===m.value?p.lam=o-n:p.lam=o;else if(6===this.face)l=Math.acos(h),p.phi=l-n,1===m.value?p.lam=-o+n:2===m.value?p.lam=-o:3===m.value?p.lam=-o-n:p.lam=o<0?-o-u:-o+u;else{var _,y,v;c=(_=h)*_,y=(c+=(v=c>=1?0:Math.sqrt(1-c)*Math.sin(o))*v)>=1?0:Math.sqrt(1-c),2===m.value?(c=y,y=-v,v=c):3===m.value?(y=-y,v=-v):4===m.value&&(c=y,y=v,v=-c),2===this.face?(c=_,_=-y,y=c):3===this.face?(_=-_,y=-y):4===this.face&&(c=_,_=y,y=-c),p.phi=Math.acos(-v)-n,p.lam=Math.atan2(y,_),2===this.face?p.lam=Di(p.lam,-n):3===this.face?p.lam=Di(p.lam,-u):4===this.face&&(p.lam=Di(p.lam,+n))}return 0!==this.es&&(f=p.phi<0?1:0,d=Math.tan(p.phi),g=this.b/Math.sqrt(d*d+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-g*g)/(this.one_minus_f*g)),f&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var Hi=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Wi=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Xi=.8487,Zi=1.3523,$i=o/5,Vi=1/$i,Yi=function(t,i){return t[0]+i*(t[1]+i*(t[2]+i*t[3]))};const Qi={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var i=W(t.x-this.long0),s=Math.abs(t.y),e=Math.floor(s*$i);e<0?e=0:e>=18&&(e=17);var n={x:Yi(Hi[e],s=o*(s-Vi*e))*i,y:Yi(Wi[e],s)};return t.y<0&&(n.y=-n.y),n.x=n.x*this.a*Xi+this.x0,n.y=n.y*this.a*Zi+this.y0,n},inverse:function(t){var i={x:(t.x-this.x0)/(this.a*Xi),y:Math.abs(t.y-this.y0)/(this.a*Zi)};if(i.y>=1)i.x/=Hi[18][0],i.y=t.y<0?-n:n;else{var s=Math.floor(18*i.y);for(s<0?s=0:s>=18&&(s=17);;)if(Wi[s][0]>i.y)--s;else{if(!(Wi[s+1][0]<=i.y))break;++s}var e=Wi[s],a=5*(i.y-e[0])/(Wi[s+1][0]-e[0]);a=function(t,i,s,e){for(var n=i;e;--e){var a=t(n);if(n-=a,Math.abs(a)<1e-10)break}return n}(function(t){return(Yi(e,t)-i.y)/function(t,i){return t[1]+i*(2*t[2]+3*i*t[3])}(e,t)},a,0,100),i.x/=Yi(Hi[s],a),i.y=(5*s+a)*r,t.y<0&&(i.y=-i.y)}return i.x=W(i.x+this.long0),i},names:["Robinson","robin"]},Ki={init:function(){this.name="geocent"},forward:function(t){return yt(t,this.es,this.a)},inverse:function(t){return vt(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var Ji={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const ts={init:function(){if(Object.keys(Ji).forEach(function(t){if(void 0===this[t])this[t]=Ji[t].def;else{if(Ji[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Ji[t].num&&(this[t]=parseFloat(this[t]))}Ji[t].degrees&&(this[t]=this[t]*r)}.bind(this)),Math.abs(Math.abs(this.lat0)-n)<a?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<a?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,i=this.azi;this.cg=Math.cos(i),this.sg=Math.sin(i),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var i,s,e,n,a=Math.sin(t.y),r=Math.cos(t.y),o=Math.cos(t.x);switch(this.mode){case 3:s=this.sinph0*a+this.cosph0*r*o;break;case 2:s=r*o;break;case 1:s=-a;break;case 0:s=a}switch(i=(s=this.pn1/(this.p-s))*r*Math.sin(t.x),this.mode){case 3:s*=this.cosph0*a-this.sinph0*r*o;break;case 2:s*=a;break;case 0:s*=-r*o;break;case 1:s*=r*o}return n=1/((e=s*this.cg+i*this.sg)*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*n,s=e*n,t.x=i*this.a,t.y=s*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var i,s,e,n={x:t.x,y:t.y};e=1/(this.pn1-t.y*this.sw),i=this.pn1*t.x*e,s=this.pn1*t.y*this.cw*e,t.x=i*this.cg+s*this.sg,t.y=s*this.cg-i*this.sg;var r=ii(t.x,t.y);if(Math.abs(r)<a)n.x=0,n.y=t.y;else{var o,h;switch(h=1-r*r*this.pfact,h=(this.p-Math.sqrt(h))/(this.pn1/r+r/this.pn1),o=Math.sqrt(1-h*h),this.mode){case 3:n.y=Math.asin(o*this.sinph0+t.y*h*this.cosph0/r),t.y=(o-this.sinph0*Math.sin(n.y))*r,t.x*=h*this.cosph0;break;case 2:n.y=Math.asin(t.y*h/r),t.y=o*r,t.x*=h;break;case 0:n.y=Math.asin(o),t.y=-t.y;break;case 1:n.y=-Math.asin(o)}n.x=Math.atan2(t.x,t.y)}return t.x=n.x+this.long0,t.y=n.y,t},names:["Tilted_Perspective","tpers"]},is={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,i=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=i,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var i,s,e,n,a=t.x,r=t.y;if(a-=this.long0,"ellipse"===this.shape){r=Math.atan(this.radius_p2*Math.tan(r));var o=this.radius_p/ii(this.radius_p*Math.cos(r),Math.sin(r));if(s=o*Math.cos(a)*Math.cos(r),e=o*Math.sin(a)*Math.cos(r),n=o*Math.sin(r),(this.radius_g-s)*s-e*e-n*n*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(e/ii(n,i)),t.y=this.radius_g_1*Math.atan(n/i)):(t.x=this.radius_g_1*Math.atan(e/i),t.y=this.radius_g_1*Math.atan(n/ii(e,i)))}else"sphere"===this.shape&&(i=Math.cos(r),s=Math.cos(a)*i,e=Math.sin(a)*i,n=Math.sin(r),i=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(e/ii(n,i)),t.y=this.radius_g_1*Math.atan(n/i)):(t.x=this.radius_g_1*Math.atan(e/i),t.y=this.radius_g_1*Math.atan(n/ii(e,i))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var i,s,e,n,a=-1,r=0,o=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(o=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*ii(1,o)):(r=Math.tan(t.x/this.radius_g_1),o=Math.tan(t.y/this.radius_g_1)*ii(1,r));var h=o/this.radius_p;if(i=r*r+h*h+a*a,(e=(s=2*this.radius_g*a)*s-4*i*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=(-s-Math.sqrt(e))/(2*i),a=this.radius_g+n*a,r*=n,o*=n,t.x=Math.atan2(r,a),t.y=Math.atan(o*Math.cos(t.x)/a),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(o=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+o*o)):(r=Math.tan(t.x/this.radius_g_1),o=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),i=r*r+o*o+a*a,(e=(s=2*this.radius_g*a)*s-4*i*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=(-s-Math.sqrt(e))/(2*i),a=this.radius_g+n*a,r*=n,o*=n,t.x=Math.atan2(r,a),t.y=Math.atan(o*Math.cos(t.x)/a)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var ss=1.340264,es=-.081106,ns=893e-6,as=.003796,rs=Math.sqrt(3)/2;const os={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(t){var i=W(t.x-this.long0),s=t.y,e=Math.asin(rs*Math.sin(s)),n=e*e,a=n*n*n;return t.x=i*Math.cos(e)/(rs*(ss+3*es*n+a*(7*ns+9*as*n))),t.y=e*(ss+es*n+a*(ns+as*n)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var i,s,e,n,a=t.y;for(n=0;n<12&&(a-=e=(a*(ss+es*(i=a*a)+(s=i*i*i)*(ns+as*i))-t.y)/(ss+3*es*i+s*(7*ns+9*as*i)),!(Math.abs(e)<1e-9));++n);return s=(i=a*a)*i*i,t.x=rs*t.x*(ss+3*es*i+s*(7*ns+9*as*i))/Math.cos(a),t.y=Math.asin(Math.sin(a)/rs),t.x=W(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]};var hs=1e-10;function ls(t){var i,s,e,n=W(t.x-(this.long0||0)),a=t.y;return i=this.am1+this.m1-Qt(a,s=Math.sin(a),e=Math.cos(a),this.en),s=e*n/(i*Math.sqrt(1-this.es*s*s)),t.x=i*Math.sin(s),t.y=this.am1-i*Math.cos(s),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function us(t){var i,s,e,a;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,s=ii(t.x,t.y=this.am1-t.y),a=Kt(this.am1+this.m1-s,this.es,this.en),(i=Math.abs(a))<n)i=Math.sin(a),e=s*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*i*i)/Math.cos(a);else{if(!(Math.abs(i-n)<=hs))throw new Error;e=0}return t.x=W(e+(this.long0||0)),t.y=xi(a),t}function cs(t){var i,s,e=W(t.x-(this.long0||0)),n=t.y;return s=this.cphi1+this.phi1-n,Math.abs(s)>hs?(t.x=s*Math.sin(i=e*Math.cos(n)/s),t.y=this.cphi1-s*Math.cos(i)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function fs(t){var i,s;t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e=ii(t.x,t.y=this.cphi1-t.y);if(s=this.cphi1+this.phi1-e,Math.abs(s)>n)throw new Error;return i=Math.abs(Math.abs(s)-n)<=hs?0:e*Math.atan2(t.x,t.y)/Math.cos(s),t.x=W(i+(this.long0||0)),t.y=xi(s),t}const ds={init:function(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<hs)throw new Error;this.es?(this.en=Yt(this.es),this.m1=Qt(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=us,this.forward=ls):(Math.abs(this.phi1)+hs>=n?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=fs,this.forward=cs)},names:["bonne","Bonne (Werner lat_1=90)"]},gs=Object.assign(function(t,i,s){var e,n,a,r=!1;return void 0===i?(n=Nt(t),e=Ct,r=!0):(void 0!==i.x||Array.isArray(i))&&(s=i,n=Nt(t),e=Ct,r=!0),e||(e=Nt(t)),n||(n=Nt(i)),s?At(e,n,s):(a={forward:function(t,i){return At(e,n,t,i)},inverse:function(t,i){return At(n,e,t,i)}},r&&(a.oProj=n),a)},{defaultDatum:"WGS84",Proj:_t,WGS84:new _t("WGS84"),Point:Xt,toPoint:St,defs:j,nadgrid:function(t,i,s){return i instanceof ArrayBuffer?function(t,i,s){var e=!0;void 0!==s&&!1===s.includeErrorFields&&(e=!1);var n=new DataView(i),a=function(t){var i=t.getInt32(8,!1);return 11!==i&&(11!==(i=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(n),r=function(t,i){return{nFields:t.getInt32(8,i),nSubgridFields:t.getInt32(24,i),nSubgrids:t.getInt32(40,i),shiftType:ft(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,i),fromSemiMinorAxis:t.getFloat64(136,i),toSemiMajorAxis:t.getFloat64(152,i),toSemiMinorAxis:t.getFloat64(168,i)}}(n,a),o=function(t,i,s,e){for(var n=176,a=[],r=0;r<i.nSubgrids;r++){var o=gt(t,n,s),h=pt(t,n,o,s,e),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);a.push({ll:[ct(o.lowerLongitude),ct(o.lowerLatitude)],del:[ct(o.longitudeInterval),ct(o.latitudeInterval)],lim:[l,u],count:o.gridNodeCount,cvs:dt(h)});var c=16;!1===e&&(c=8),n+=176+o.gridNodeCount*c}return a}(n,r,a,e),h={header:r,subgrids:o};return ot[t]=h,h}(t,i,s):{ready:ht(t,i)}},transform:Pt,mgrs:Ot,version:"__VERSION__"});var ps;(ps=gs).Proj.projections.add(Jt),ps.Proj.projections.add(ni),ps.Proj.projections.add(ai),ps.Proj.projections.add(hi),ps.Proj.projections.add(ui),ps.Proj.projections.add(ci),ps.Proj.projections.add(di),ps.Proj.projections.add(gi),ps.Proj.projections.add(pi),ps.Proj.projections.add(bi),ps.Proj.projections.add(Gi),ps.Proj.projections.add(Ci),ps.Proj.projections.add(Ai),ps.Proj.projections.add(Ni),ps.Proj.projections.add(ki),ps.Proj.projections.add(Ii),ps.Proj.projections.add(zi),ps.Proj.projections.add(Ri),ps.Proj.projections.add(Ti),ps.Proj.projections.add(Oi),ps.Proj.projections.add(Li),ps.Proj.projections.add(qi),ps.Proj.projections.add(Fi),ps.Proj.projections.add(ji),ps.Proj.projections.add(Ui),ps.Proj.projections.add(Qi),ps.Proj.projections.add(Ki),ps.Proj.projections.add(ts),ps.Proj.projections.add(is),ps.Proj.projections.add(os),ps.Proj.projections.add(ds);const ms=gs;function _s(){}function ys(t){return null==t?_s:function(){return this.querySelector(t)}}function vs(){return[]}function Ms(t){return null==t?vs:function(){return this.querySelectorAll(t)}}function ws(t){return function(){return this.matches(t)}}function xs(t){return function(i){return i.matches(t)}}var Es=Array.prototype.find;function bs(){return this.firstElementChild}var Ss=Array.prototype.filter;function Gs(){return Array.from(this.children)}function Ps(t){return new Array(t.length)}function Cs(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function As(t,i,s,e,n,a){for(var r,o=0,h=i.length,l=a.length;o<l;++o)(r=i[o])?(r.__data__=a[o],e[o]=r):s[o]=new Cs(t,a[o]);for(;o<h;++o)(r=i[o])&&(n[o]=r)}function Ns(t,i,s,e,n,a,r){var o,h,l,u=new Map,c=i.length,f=a.length,d=new Array(c);for(o=0;o<c;++o)(h=i[o])&&(d[o]=l=r.call(h,h.__data__,o,i)+"",u.has(l)?n[o]=h:u.set(l,h));for(o=0;o<f;++o)l=r.call(t,a[o],o,a)+"",(h=u.get(l))?(e[o]=h,h.__data__=a[o],u.delete(l)):s[o]=new Cs(t,a[o]);for(o=0;o<c;++o)(h=i[o])&&u.get(d[o])===h&&(n[o]=h)}function ks(t){return t.__data__}function Is(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function zs(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}Cs.prototype={constructor:Cs,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Rs="http://www.w3.org/1999/xhtml";const Ts={svg:"http://www.w3.org/2000/svg",xhtml:Rs,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Os(t){var i=t+="",s=i.indexOf(":");return s>=0&&"xmlns"!==(i=t.slice(0,s))&&(t=t.slice(s+1)),Ts.hasOwnProperty(i)?{space:Ts[i],local:t}:t}function Ls(t){return function(){this.removeAttribute(t)}}function qs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fs(t,i){return function(){this.setAttribute(t,i)}}function js(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function Bs(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttribute(t):this.setAttribute(t,s)}}function Ds(t,i){return function(){var s=i.apply(this,arguments);null==s?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function Us(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Hs(t){return function(){this.style.removeProperty(t)}}function Ws(t,i,s){return function(){this.style.setProperty(t,i,s)}}function Xs(t,i,s){return function(){var e=i.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,s)}}function Zs(t,i){return t.style.getPropertyValue(i)||Us(t).getComputedStyle(t,null).getPropertyValue(i)}function $s(t){return function(){delete this[t]}}function Vs(t,i){return function(){this[t]=i}}function Ys(t,i){return function(){var s=i.apply(this,arguments);null==s?delete this[t]:this[t]=s}}function Qs(t){return t.trim().split(/^|\s+/)}function Ks(t){return t.classList||new Js(t)}function Js(t){this._node=t,this._names=Qs(t.getAttribute("class")||"")}function te(t,i){for(var s=Ks(t),e=-1,n=i.length;++e<n;)s.add(i[e])}function ie(t,i){for(var s=Ks(t),e=-1,n=i.length;++e<n;)s.remove(i[e])}function se(t){return function(){te(this,t)}}function ee(t){return function(){ie(this,t)}}function ne(t,i){return function(){(i.apply(this,arguments)?te:ie)(this,t)}}function ae(){this.textContent=""}function re(t){return function(){this.textContent=t}}function oe(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function he(){this.innerHTML=""}function le(t){return function(){this.innerHTML=t}}function ue(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function ce(){this.nextSibling&&this.parentNode.appendChild(this)}function fe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function de(t){return function(){var i=this.ownerDocument,s=this.namespaceURI;return s===Rs&&i.documentElement.namespaceURI===Rs?i.createElement(t):i.createElementNS(s,t)}}function ge(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function pe(t){var i=Os(t);return(i.local?ge:de)(i)}function me(){return null}function _e(){var t=this.parentNode;t&&t.removeChild(this)}function ye(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function ve(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function Me(t){return function(){var i=this.__on;if(i){for(var s,e=0,n=-1,a=i.length;e<a;++e)s=i[e],t.type&&s.type!==t.type||s.name!==t.name?i[++n]=s:this.removeEventListener(s.type,s.listener,s.options);++n?i.length=n:delete this.__on}}}function we(t,i,s){return function(){var e,n=this.__on,a=function(t){return function(i){t.call(this,i,this.__data__)}}(i);if(n)for(var r=0,o=n.length;r<o;++r)if((e=n[r]).type===t.type&&e.name===t.name)return this.removeEventListener(e.type,e.listener,e.options),this.addEventListener(e.type,e.listener=a,e.options=s),void(e.value=i);this.addEventListener(t.type,a,s),e={type:t.type,name:t.name,value:i,listener:a,options:s},n?n.push(e):this.__on=[e]}}function xe(t,i,s){var e=Us(t),n=e.CustomEvent;"function"==typeof n?n=new n(i,s):(n=e.document.createEvent("Event"),s?(n.initEvent(i,s.bubbles,s.cancelable),n.detail=s.detail):n.initEvent(i,!1,!1)),t.dispatchEvent(n)}function Ee(t,i){return function(){return xe(this,t,i)}}function be(t,i){return function(){return xe(this,t,i.apply(this,arguments))}}Js.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Se=[null];function Ge(t,i){this._groups=t,this._parents=i}function Pe(){return new Ge([[document.documentElement]],Se)}Ge.prototype=Pe.prototype={constructor:Ge,select:function(t){"function"!=typeof t&&(t=ys(t));for(var i=this._groups,s=i.length,e=new Array(s),n=0;n<s;++n)for(var a,r,o=i[n],h=o.length,l=e[n]=new Array(h),u=0;u<h;++u)(a=o[u])&&(r=t.call(a,a.__data__,u,o))&&("__data__"in a&&(r.__data__=a.__data__),l[u]=r);return new Ge(e,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return null==(i=t.apply(this,arguments))?[]:Array.isArray(i)?i:Array.from(i);var i}}(t):Ms(t);for(var i=this._groups,s=i.length,e=[],n=[],a=0;a<s;++a)for(var r,o=i[a],h=o.length,l=0;l<h;++l)(r=o[l])&&(e.push(t.call(r,r.__data__,l,o)),n.push(r));return new Ge(e,n)},selectChild:function(t){return this.select(null==t?bs:function(t){return function(){return Es.call(this.children,t)}}("function"==typeof t?t:xs(t)))},selectChildren:function(t){return this.selectAll(null==t?Gs:function(t){return function(){return Ss.call(this.children,t)}}("function"==typeof t?t:xs(t)))},filter:function(t){"function"!=typeof t&&(t=ws(t));for(var i=this._groups,s=i.length,e=new Array(s),n=0;n<s;++n)for(var a,r=i[n],o=r.length,h=e[n]=[],l=0;l<o;++l)(a=r[l])&&t.call(a,a.__data__,l,r)&&h.push(a);return new Ge(e,this._parents)},data:function(t,i){if(!arguments.length)return Array.from(this,ks);var s,e=i?Ns:As,n=this._parents,a=this._groups;"function"!=typeof t&&(s=t,t=function(){return s});for(var r=a.length,o=new Array(r),h=new Array(r),l=new Array(r),u=0;u<r;++u){var c=n[u],f=a[u],d=f.length,g=Is(t.call(c,c&&c.__data__,u,n)),p=g.length,m=h[u]=new Array(p),_=o[u]=new Array(p);e(c,f,m,_,l[u]=new Array(d),g,i);for(var y,v,M=0,w=0;M<p;++M)if(y=m[M]){for(M>=w&&(w=M+1);!(v=_[w])&&++w<p;);y._next=v||null}}return(o=new Ge(o,n))._enter=h,o._exit=l,o},enter:function(){return new Ge(this._enter||this._groups.map(Ps),this._parents)},exit:function(){return new Ge(this._exit||this._groups.map(Ps),this._parents)},join:function(t,i,s){var e=this.enter(),n=this,a=this.exit();return"function"==typeof t?(e=t(e))&&(e=e.selection()):e=e.append(t+""),null!=i&&(n=i(n))&&(n=n.selection()),null==s?a.remove():s(a),e&&n?e.merge(n).order():n},merge:function(t){for(var i=t.selection?t.selection():t,s=this._groups,e=i._groups,n=s.length,a=e.length,r=Math.min(n,a),o=new Array(n),h=0;h<r;++h)for(var l,u=s[h],c=e[h],f=u.length,d=o[h]=new Array(f),g=0;g<f;++g)(l=u[g]||c[g])&&(d[g]=l);for(;h<n;++h)o[h]=s[h];return new Ge(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,i=-1,s=t.length;++i<s;)for(var e,n=t[i],a=n.length-1,r=n[a];--a>=0;)(e=n[a])&&(r&&4^e.compareDocumentPosition(r)&&r.parentNode.insertBefore(e,r),r=e);return this},sort:function(t){function i(i,s){return i&&s?t(i.__data__,s.__data__):!i-!s}t||(t=zs);for(var s=this._groups,e=s.length,n=new Array(e),a=0;a<e;++a){for(var r,o=s[a],h=o.length,l=n[a]=new Array(h),u=0;u<h;++u)(r=o[u])&&(l[u]=r);l.sort(i)}return new Ge(n,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var e=t[i],n=0,a=e.length;n<a;++n){var r=e[n];if(r)return r}return null},size:function(){let t=0;for(const i of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,s=0,e=i.length;s<e;++s)for(var n,a=i[s],r=0,o=a.length;r<o;++r)(n=a[r])&&t.call(n,n.__data__,r,a);return this},attr:function(t,i){var s=Os(t);if(arguments.length<2){var e=this.node();return s.local?e.getAttributeNS(s.space,s.local):e.getAttribute(s)}return this.each((null==i?s.local?qs:Ls:"function"==typeof i?s.local?Ds:Bs:s.local?js:Fs)(s,i))},style:function(t,i,s){return arguments.length>1?this.each((null==i?Hs:"function"==typeof i?Xs:Ws)(t,i,null==s?"":s)):Zs(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?$s:"function"==typeof i?Ys:Vs)(t,i)):this.node()[t]},classed:function(t,i){var s=Qs(t+"");if(arguments.length<2){for(var e=Ks(this.node()),n=-1,a=s.length;++n<a;)if(!e.contains(s[n]))return!1;return!0}return this.each(("function"==typeof i?ne:i?se:ee)(s,i))},text:function(t){return arguments.length?this.each(null==t?ae:("function"==typeof t?oe:re)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?he:("function"==typeof t?ue:le)(t)):this.node().innerHTML},raise:function(){return this.each(ce)},lower:function(){return this.each(fe)},append:function(t){var i="function"==typeof t?t:pe(t);return this.select(function(){return this.appendChild(i.apply(this,arguments))})},insert:function(t,i){var s="function"==typeof t?t:pe(t),e=null==i?me:"function"==typeof i?i:ys(i);return this.select(function(){return this.insertBefore(s.apply(this,arguments),e.apply(this,arguments)||null)})},remove:function(){return this.each(_e)},clone:function(t){return this.select(t?ve:ye)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,s){var e,n,a=function(t){return t.trim().split(/^|\s+/).map(function(t){var i="",s=t.indexOf(".");return s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),{type:t,name:i}})}(t+""),r=a.length;if(!(arguments.length<2)){for(o=i?we:Me,e=0;e<r;++e)this.each(o(a[e],i,s));return this}var o=this.node().__on;if(o)for(var h,l=0,u=o.length;l<u;++l)for(e=0,h=o[l];e<r;++e)if((n=a[e]).type===h.type&&n.name===h.name)return h.value},dispatch:function(t,i){return this.each(("function"==typeof i?be:Ee)(t,i))},[Symbol.iterator]:function*(){for(var t=this._groups,i=0,s=t.length;i<s;++i)for(var e,n=t[i],a=0,r=n.length;a<r;++a)(e=n[a])&&(yield e)}};const Ce=Pe;function Ae(t){return"string"==typeof t?new Ge([[document.querySelector(t)]],[document.documentElement]):new Ge([[t]],Se)}var Ne={value:()=>{}};function ke(){for(var t,i=0,s=arguments.length,e={};i<s;++i){if(!(t=arguments[i]+"")||t in e||/[\s.]/.test(t))throw new Error("illegal type: "+t);e[t]=[]}return new Ie(e)}function Ie(t){this._=t}function ze(t,i){for(var s,e=0,n=t.length;e<n;++e)if((s=t[e]).name===i)return s.value}function Re(t,i,s){for(var e=0,n=t.length;e<n;++e)if(t[e].name===i){t[e]=Ne,t=t.slice(0,e).concat(t.slice(e+1));break}return null!=s&&t.push({name:i,value:s}),t}Ie.prototype=ke.prototype={constructor:Ie,on:function(t,i){var s,e,n=this._,a=(e=n,(t+"").trim().split(/^|\s+/).map(function(t){var i="",s=t.indexOf(".");if(s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})),r=-1,o=a.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++r<o;)if(s=(t=a[r]).type)n[s]=Re(n[s],t.name,i);else if(null==i)for(s in n)n[s]=Re(n[s],t.name,null);return this}for(;++r<o;)if((s=(t=a[r]).type)&&(s=ze(n[s],t.name)))return s},copy:function(){var t={},i=this._;for(var s in i)t[s]=i[s].slice();return new Ie(t)},call:function(t,i){if((s=arguments.length-2)>0)for(var s,e,n=new Array(s),a=0;a<s;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,s=(e=this._[t]).length;a<s;++a)e[a].value.apply(i,n)},apply:function(t,i,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var e=this._[t],n=0,a=e.length;n<a;++n)e[n].value.apply(i,s)}};const Te=ke,Oe={capture:!0,passive:!1};function Le(t){t.preventDefault(),t.stopImmediatePropagation()}function qe(t){return((t=Math.exp(t))+1/t)/2}const Fe=function t(i,s,e){function n(t,n){var a,r,o=t[0],h=t[1],l=t[2],u=n[0],c=n[1],f=n[2],d=u-o,g=c-h,p=d*d+g*g;if(p<1e-12)r=Math.log(f/l)/i,a=function(t){return[o+t*d,h+t*g,l*Math.exp(i*t*r)]};else{var m=Math.sqrt(p),_=(f*f-l*l+e*p)/(2*l*s*m),y=(f*f-l*l-e*p)/(2*f*s*m),v=Math.log(Math.sqrt(_*_+1)-_),M=Math.log(Math.sqrt(y*y+1)-y);r=(M-v)/i,a=function(t){var e,n=t*r,a=qe(v),u=l/(s*m)*(a*(e=i*n+v,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[o+u*d,h+u*g,l*a/qe(i*n+v)]}}return a.duration=1e3*r*i/Math.SQRT2,a}return n.rho=function(i){var s=Math.max(.001,+i),e=s*s;return t(s,e,e*e)},n}(Math.SQRT2,2,4);function je(t,i){if(t=function(t){let i;for(;i=t.sourceEvent;)t=i;return t}(t),void 0===i&&(i=t.currentTarget),i){var s=i.ownerSVGElement||i;if(s.createSVGPoint){var e=s.createSVGPoint();return e.x=t.clientX,e.y=t.clientY,[(e=e.matrixTransform(i.getScreenCTM().inverse())).x,e.y]}if(i.getBoundingClientRect){var n=i.getBoundingClientRect();return[t.clientX-n.left-i.clientLeft,t.clientY-n.top-i.clientTop]}}return[t.pageX,t.pageY]}var Be,De,Ue=0,He=0,We=0,Xe=0,Ze=0,$e=0,Ve="object"==typeof performance&&performance.now?performance:Date,Ye="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qe(){return Ze||(Ye(Ke),Ze=Ve.now()+$e)}function Ke(){Ze=0}function Je(){this._call=this._time=this._next=null}function tn(t,i,s){var e=new Je;return e.restart(t,i,s),e}function sn(){Ze=(Xe=Ve.now())+$e,Ue=He=0;try{!function(){Qe(),++Ue;for(var t,i=Be;i;)(t=Ze-i._time)>=0&&i._call.call(void 0,t),i=i._next;--Ue}()}finally{Ue=0,function(){for(var t,i,s=Be,e=1/0;s;)s._call?(e>s._time&&(e=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:Be=i);De=t,nn(e)}(),Ze=0}}function en(){var t=Ve.now(),i=t-Xe;i>1e3&&($e-=i,Xe=t)}function nn(t){Ue||(He&&(He=clearTimeout(He)),t-Ze>24?(t<1/0&&(He=setTimeout(sn,t-Ve.now()-$e)),We&&(We=clearInterval(We))):(We||(Xe=Ve.now(),We=setInterval(en,1e3)),Ue=1,Ye(sn)))}function an(t,i,s){var e=new Je;return i=null==i?0:+i,e.restart(s=>{e.stop(),t(s+i)},i,s),e}Je.prototype=tn.prototype={constructor:Je,restart:function(t,i,s){if("function"!=typeof t)throw new TypeError("callback is not a function");s=(null==s?Qe():+s)+(null==i?0:+i),this._next||De===this||(De?De._next=this:Be=this,De=this),this._call=t,this._time=s,nn()},stop:function(){this._call&&(this._call=null,this._time=1/0,nn())}};var rn=Te("start","end","cancel","interrupt"),on=[];function hn(t,i,s,e,n,a){var r=t.__transition;if(r){if(s in r)return}else t.__transition={};!function(t,i,s){var e,n=t.__transition;function a(h){var l,u,c,f;if(1!==s.state)return o();for(l in n)if((f=n[l]).name===s.name){if(3===f.state)return an(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete n[l]):+l<i&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete n[l])}if(an(function(){3===s.state&&(s.state=4,s.timer.restart(r,s.delay,s.time),r(h))}),s.state=2,s.on.call("start",t,t.__data__,s.index,s.group),2===s.state){for(s.state=3,e=new Array(c=s.tween.length),l=0,u=-1;l<c;++l)(f=s.tween[l].value.call(t,t.__data__,s.index,s.group))&&(e[++u]=f);e.length=u+1}}function r(i){for(var n=i<s.duration?s.ease.call(null,i/s.duration):(s.timer.restart(o),s.state=5,1),a=-1,r=e.length;++a<r;)e[a].call(t,n);5===s.state&&(s.on.call("end",t,t.__data__,s.index,s.group),o())}function o(){for(var e in s.state=6,s.timer.stop(),delete n[i],n)return;delete t.__transition}n[i]=s,s.timer=tn(function(t){s.state=1,s.timer.restart(a,s.delay,s.time),s.delay<=t&&a(t-s.delay)},0,s.time)}(t,s,{name:i,index:e,group:n,on:rn,tween:on,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function ln(t,i){var s=cn(t,i);if(s.state>0)throw new Error("too late; already scheduled");return s}function un(t,i){var s=cn(t,i);if(s.state>3)throw new Error("too late; already running");return s}function cn(t,i){var s=t.__transition;if(!s||!(s=s[i]))throw new Error("transition not found");return s}function fn(t,i){var s,e,n,a=t.__transition,r=!0;if(a){for(n in i=null==i?null:i+"",a)(s=a[n]).name===i?(e=s.state>2&&s.state<5,s.state=6,s.timer.stop(),s.on.call(e?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete a[n]):r=!1;r&&delete t.__transition}}function dn(t,i){return t=+t,i=+i,function(s){return t*(1-s)+i*s}}var gn,pn=180/Math.PI,mn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _n(t,i,s,e,n,a){var r,o,h;return(r=Math.sqrt(t*t+i*i))&&(t/=r,i/=r),(h=t*s+i*e)&&(s-=t*h,e-=i*h),(o=Math.sqrt(s*s+e*e))&&(s/=o,e/=o,h/=o),t*e<i*s&&(t=-t,i=-i,h=-h,r=-r),{translateX:n,translateY:a,rotate:Math.atan2(i,t)*pn,skewX:Math.atan(h)*pn,scaleX:r,scaleY:o}}function yn(t,i,s,e){function n(t){return t.length?t.pop()+" ":""}return function(a,r){var o=[],h=[];return a=t(a),r=t(r),function(t,e,n,a,r,o){if(t!==n||e!==a){var h=r.push("translate(",null,i,null,s);o.push({i:h-4,x:dn(t,n)},{i:h-2,x:dn(e,a)})}else(n||a)&&r.push("translate("+n+i+a+s)}(a.translateX,a.translateY,r.translateX,r.translateY,o,h),function(t,i,s,a){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),a.push({i:s.push(n(s)+"rotate(",null,e)-2,x:dn(t,i)})):i&&s.push(n(s)+"rotate("+i+e)}(a.rotate,r.rotate,o,h),function(t,i,s,a){t!==i?a.push({i:s.push(n(s)+"skewX(",null,e)-2,x:dn(t,i)}):i&&s.push(n(s)+"skewX("+i+e)}(a.skewX,r.skewX,o,h),function(t,i,s,e,a,r){if(t!==s||i!==e){var o=a.push(n(a)+"scale(",null,",",null,")");r.push({i:o-4,x:dn(t,s)},{i:o-2,x:dn(i,e)})}else 1===s&&1===e||a.push(n(a)+"scale("+s+","+e+")")}(a.scaleX,a.scaleY,r.scaleX,r.scaleY,o,h),a=r=null,function(t){for(var i,s=-1,e=h.length;++s<e;)o[(i=h[s]).i]=i.x(t);return o.join("")}}}var vn=yn(function(t){const i=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return i.isIdentity?mn:_n(i.a,i.b,i.c,i.d,i.e,i.f)},"px, ","px)","deg)"),Mn=yn(function(t){return null==t?mn:(gn||(gn=document.createElementNS("http://www.w3.org/2000/svg","g")),gn.setAttribute("transform",t),(t=gn.transform.baseVal.consolidate())?_n((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):mn)},", ",")",")");function wn(t,i){var s,e;return function(){var n=un(this,t),a=n.tween;if(a!==s)for(var r=0,o=(e=s=a).length;r<o;++r)if(e[r].name===i){(e=e.slice()).splice(r,1);break}n.tween=e}}function xn(t,i,s){var e,n;if("function"!=typeof s)throw new Error;return function(){var a=un(this,t),r=a.tween;if(r!==e){n=(e=r).slice();for(var o={name:i,value:s},h=0,l=n.length;h<l;++h)if(n[h].name===i){n[h]=o;break}h===l&&n.push(o)}a.tween=n}}function En(t,i,s){var e=t._id;return t.each(function(){var t=un(this,e);(t.value||(t.value={}))[i]=s.apply(this,arguments)}),function(t){return cn(t,e).value[i]}}function bn(t,i,s){t.prototype=i.prototype=s,s.constructor=t}function Sn(t,i){var s=Object.create(t.prototype);for(var e in i)s[e]=i[e];return s}function Gn(){}var Pn=.7,Cn=1/Pn,An="\\s*([+-]?\\d+)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",In=/^#([0-9a-f]{3,8})$/,zn=new RegExp(`^rgb\\(${An},${An},${An}\\)$`),Rn=new RegExp(`^rgb\\(${kn},${kn},${kn}\\)$`),Tn=new RegExp(`^rgba\\(${An},${An},${An},${Nn}\\)$`),On=new RegExp(`^rgba\\(${kn},${kn},${kn},${Nn}\\)$`),Ln=new RegExp(`^hsl\\(${Nn},${kn},${kn}\\)$`),qn=new RegExp(`^hsla\\(${Nn},${kn},${kn},${Nn}\\)$`),Fn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function jn(){return this.rgb().formatHex()}function Bn(){return this.rgb().formatRgb()}function Dn(t){var i,s;return t=(t+"").trim().toLowerCase(),(i=In.exec(t))?(s=i[1].length,i=parseInt(i[1],16),6===s?Un(i):3===s?new Xn(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===s?Hn(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===s?Hn(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=zn.exec(t))?new Xn(i[1],i[2],i[3],1):(i=Rn.exec(t))?new Xn(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=Tn.exec(t))?Hn(i[1],i[2],i[3],i[4]):(i=On.exec(t))?Hn(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=Ln.exec(t))?Kn(i[1],i[2]/100,i[3]/100,1):(i=qn.exec(t))?Kn(i[1],i[2]/100,i[3]/100,i[4]):Fn.hasOwnProperty(t)?Un(Fn[t]):"transparent"===t?new Xn(NaN,NaN,NaN,0):null}function Un(t){return new Xn(t>>16&255,t>>8&255,255&t,1)}function Hn(t,i,s,e){return e<=0&&(t=i=s=NaN),new Xn(t,i,s,e)}function Wn(t,i,s,e){return 1===arguments.length?((n=t)instanceof Gn||(n=Dn(n)),n?new Xn((n=n.rgb()).r,n.g,n.b,n.opacity):new Xn):new Xn(t,i,s,null==e?1:e);var n}function Xn(t,i,s,e){this.r=+t,this.g=+i,this.b=+s,this.opacity=+e}function Zn(){return`#${Qn(this.r)}${Qn(this.g)}${Qn(this.b)}`}function $n(){const t=Vn(this.opacity);return`${1===t?"rgb(":"rgba("}${Yn(this.r)}, ${Yn(this.g)}, ${Yn(this.b)}${1===t?")":`, ${t})`}`}function Vn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Yn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Qn(t){return((t=Yn(t))<16?"0":"")+t.toString(16)}function Kn(t,i,s,e){return e<=0?t=i=s=NaN:s<=0||s>=1?t=i=NaN:i<=0&&(t=NaN),new ta(t,i,s,e)}function Jn(t){if(t instanceof ta)return new ta(t.h,t.s,t.l,t.opacity);if(t instanceof Gn||(t=Dn(t)),!t)return new ta;if(t instanceof ta)return t;var i=(t=t.rgb()).r/255,s=t.g/255,e=t.b/255,n=Math.min(i,s,e),a=Math.max(i,s,e),r=NaN,o=a-n,h=(a+n)/2;return o?(r=i===a?(s-e)/o+6*(s<e):s===a?(e-i)/o+2:(i-s)/o+4,o/=h<.5?a+n:2-a-n,r*=60):o=h>0&&h<1?0:r,new ta(r,o,h,t.opacity)}function ta(t,i,s,e){this.h=+t,this.s=+i,this.l=+s,this.opacity=+e}function ia(t){return(t=(t||0)%360)<0?t+360:t}function sa(t){return Math.max(0,Math.min(1,t||0))}function ea(t,i,s){return 255*(t<60?i+(s-i)*t/60:t<180?s:t<240?i+(s-i)*(240-t)/60:i)}function na(t,i,s,e,n){var a=t*t,r=a*t;return((1-3*t+3*a-r)*i+(4-6*a+3*r)*s+(1+3*t+3*a-3*r)*e+r*n)/6}bn(Gn,Dn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:jn,formatHex:jn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Jn(this).formatHsl()},formatRgb:Bn,toString:Bn}),bn(Xn,Wn,Sn(Gn,{brighter(t){return t=null==t?Cn:Math.pow(Cn,t),new Xn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Pn:Math.pow(Pn,t),new Xn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xn(Yn(this.r),Yn(this.g),Yn(this.b),Vn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zn,formatHex:Zn,formatHex8:function(){return`#${Qn(this.r)}${Qn(this.g)}${Qn(this.b)}${Qn(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:$n,toString:$n})),bn(ta,function(t,i,s,e){return 1===arguments.length?Jn(t):new ta(t,i,s,null==e?1:e)},Sn(Gn,{brighter(t){return t=null==t?Cn:Math.pow(Cn,t),new ta(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Pn:Math.pow(Pn,t),new ta(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,e=s+(s<.5?s:1-s)*i,n=2*s-e;return new Xn(ea(t>=240?t-240:t+120,n,e),ea(t,n,e),ea(t<120?t+240:t-120,n,e),this.opacity)},clamp(){return new ta(ia(this.h),sa(this.s),sa(this.l),Vn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Vn(this.opacity);return`${1===t?"hsl(":"hsla("}${ia(this.h)}, ${100*sa(this.s)}%, ${100*sa(this.l)}%${1===t?")":`, ${t})`}`}}));const aa=t=>()=>t;function ra(t,i){var s=i-t;return s?function(t,i){return function(s){return t+s*i}}(t,s):aa(isNaN(t)?i:t)}const oa=function t(i){var s=function(t){return 1===(t=+t)?ra:function(i,s){return s-i?function(t,i,s){return t=Math.pow(t,s),i=Math.pow(i,s)-t,s=1/s,function(e){return Math.pow(t+e*i,s)}}(i,s,t):aa(isNaN(i)?s:i)}}(i);function e(t,i){var e=s((t=Wn(t)).r,(i=Wn(i)).r),n=s(t.g,i.g),a=s(t.b,i.b),r=ra(t.opacity,i.opacity);return function(i){return t.r=e(i),t.g=n(i),t.b=a(i),t.opacity=r(i),t+""}}return e.gamma=t,e}(1);function ha(t){return function(i){var s,e,n=i.length,a=new Array(n),r=new Array(n),o=new Array(n);for(s=0;s<n;++s)e=Wn(i[s]),a[s]=e.r||0,r[s]=e.g||0,o[s]=e.b||0;return a=t(a),r=t(r),o=t(o),e.opacity=1,function(t){return e.r=a(t),e.g=r(t),e.b=o(t),e+""}}}ha(function(t){var i=t.length-1;return function(s){var e=s<=0?s=0:s>=1?(s=1,i-1):Math.floor(s*i),n=t[e],a=t[e+1],r=e>0?t[e-1]:2*n-a,o=e<i-1?t[e+2]:2*a-n;return na((s-e/i)*i,r,n,a,o)}}),ha(function(t){var i=t.length;return function(s){var e=Math.floor(((s%=1)<0?++s:s)*i),n=t[(e+i-1)%i],a=t[e%i],r=t[(e+1)%i],o=t[(e+2)%i];return na((s-e/i)*i,n,a,r,o)}});var la=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ua=new RegExp(la.source,"g");function ca(t,i){var s,e,n,a=la.lastIndex=ua.lastIndex=0,r=-1,o=[],h=[];for(t+="",i+="";(s=la.exec(t))&&(e=ua.exec(i));)(n=e.index)>a&&(n=i.slice(a,n),o[r]?o[r]+=n:o[++r]=n),(s=s[0])===(e=e[0])?o[r]?o[r]+=e:o[++r]=e:(o[++r]=null,h.push({i:r,x:dn(s,e)})),a=ua.lastIndex;return a<i.length&&(n=i.slice(a),o[r]?o[r]+=n:o[++r]=n),o.length<2?h[0]?function(t){return function(i){return t(i)+""}}(h[0].x):function(t){return function(){return t}}(i):(i=h.length,function(t){for(var s,e=0;e<i;++e)o[(s=h[e]).i]=s.x(t);return o.join("")})}function fa(t,i){var s;return("number"==typeof i?dn:i instanceof Dn?oa:(s=Dn(i))?(i=s,oa):ca)(t,i)}function da(t){return function(){this.removeAttribute(t)}}function ga(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pa(t,i,s){var e,n,a=s+"";return function(){var r=this.getAttribute(t);return r===a?null:r===e?n:n=i(e=r,s)}}function ma(t,i,s){var e,n,a=s+"";return function(){var r=this.getAttributeNS(t.space,t.local);return r===a?null:r===e?n:n=i(e=r,s)}}function _a(t,i,s){var e,n,a;return function(){var r,o,h=s(this);if(null!=h)return(r=this.getAttribute(t))===(o=h+"")?null:r===e&&o===n?a:(n=o,a=i(e=r,h));this.removeAttribute(t)}}function ya(t,i,s){var e,n,a;return function(){var r,o,h=s(this);if(null!=h)return(r=this.getAttributeNS(t.space,t.local))===(o=h+"")?null:r===e&&o===n?a:(n=o,a=i(e=r,h));this.removeAttributeNS(t.space,t.local)}}function va(t,i){var s,e;function n(){var n=i.apply(this,arguments);return n!==e&&(s=(e=n)&&function(t,i){return function(s){this.setAttributeNS(t.space,t.local,i.call(this,s))}}(t,n)),s}return n._value=i,n}function Ma(t,i){var s,e;function n(){var n=i.apply(this,arguments);return n!==e&&(s=(e=n)&&function(t,i){return function(s){this.setAttribute(t,i.call(this,s))}}(t,n)),s}return n._value=i,n}function wa(t,i){return function(){ln(this,t).delay=+i.apply(this,arguments)}}function xa(t,i){return i=+i,function(){ln(this,t).delay=i}}function Ea(t,i){return function(){un(this,t).duration=+i.apply(this,arguments)}}function ba(t,i){return i=+i,function(){un(this,t).duration=i}}var Sa=Ce.prototype.constructor;function Ga(t){return function(){this.style.removeProperty(t)}}var Pa=0;function Ca(t,i,s,e){this._groups=t,this._parents=i,this._name=s,this._id=e}function Aa(){return++Pa}var Na=Ce.prototype;Ca.prototype=function(t){return Ce().transition(t)}.prototype={constructor:Ca,select:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=ys(t));for(var e=this._groups,n=e.length,a=new Array(n),r=0;r<n;++r)for(var o,h,l=e[r],u=l.length,c=a[r]=new Array(u),f=0;f<u;++f)(o=l[f])&&(h=t.call(o,o.__data__,f,l))&&("__data__"in o&&(h.__data__=o.__data__),c[f]=h,hn(c[f],i,s,f,c,cn(o,s)));return new Ca(a,this._parents,i,s)},selectAll:function(t){var i=this._name,s=this._id;"function"!=typeof t&&(t=Ms(t));for(var e=this._groups,n=e.length,a=[],r=[],o=0;o<n;++o)for(var h,l=e[o],u=l.length,c=0;c<u;++c)if(h=l[c]){for(var f,d=t.call(h,h.__data__,c,l),g=cn(h,s),p=0,m=d.length;p<m;++p)(f=d[p])&&hn(f,i,s,p,d,g);a.push(d),r.push(h)}return new Ca(a,r,i,s)},selectChild:Na.selectChild,selectChildren:Na.selectChildren,filter:function(t){"function"!=typeof t&&(t=ws(t));for(var i=this._groups,s=i.length,e=new Array(s),n=0;n<s;++n)for(var a,r=i[n],o=r.length,h=e[n]=[],l=0;l<o;++l)(a=r[l])&&t.call(a,a.__data__,l,r)&&h.push(a);return new Ca(e,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,s=t._groups,e=i.length,n=s.length,a=Math.min(e,n),r=new Array(e),o=0;o<a;++o)for(var h,l=i[o],u=s[o],c=l.length,f=r[o]=new Array(c),d=0;d<c;++d)(h=l[d]||u[d])&&(f[d]=h);for(;o<e;++o)r[o]=i[o];return new Ca(r,this._parents,this._name,this._id)},selection:function(){return new Sa(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,s=Aa(),e=this._groups,n=e.length,a=0;a<n;++a)for(var r,o=e[a],h=o.length,l=0;l<h;++l)if(r=o[l]){var u=cn(r,i);hn(r,t,s,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ca(e,this._parents,t,s)},call:Na.call,nodes:Na.nodes,node:Na.node,size:Na.size,empty:Na.empty,each:Na.each,on:function(t,i){var s=this._id;return arguments.length<2?cn(this.node(),s).on.on(t):this.each(function(t,i,s){var e,n,a=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t})}(i)?ln:un;return function(){var r=a(this,t),o=r.on;o!==e&&(n=(e=o).copy()).on(i,s),r.on=n}}(s,t,i))},attr:function(t,i){var s=Os(t),e="transform"===s?Mn:fa;return this.attrTween(t,"function"==typeof i?(s.local?ya:_a)(s,e,En(this,"attr."+t,i)):null==i?(s.local?ga:da)(s):(s.local?ma:pa)(s,e,i))},attrTween:function(t,i){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;var e=Os(t);return this.tween(s,(e.local?va:Ma)(e,i))},style:function(t,i,s){var e="transform"==(t+="")?vn:fa;return null==i?this.styleTween(t,function(t,i){var s,e,n;return function(){var a=Zs(this,t),r=(this.style.removeProperty(t),Zs(this,t));return a===r?null:a===s&&r===e?n:n=i(s=a,e=r)}}(t,e)).on("end.style."+t,Ga(t)):"function"==typeof i?this.styleTween(t,function(t,i,s){var e,n,a;return function(){var r=Zs(this,t),o=s(this),h=o+"";return null==o&&(this.style.removeProperty(t),h=o=Zs(this,t)),r===h?null:r===e&&h===n?a:(n=h,a=i(e=r,o))}}(t,e,En(this,"style."+t,i))).each(function(t,i){var s,e,n,a,r="style."+i,o="end."+r;return function(){var h=un(this,t),l=h.on,u=null==h.value[r]?a||(a=Ga(i)):void 0;l===s&&n===u||(e=(s=l).copy()).on(o,n=u),h.on=e}}(this._id,t)):this.styleTween(t,function(t,i,s){var e,n,a=s+"";return function(){var r=Zs(this,t);return r===a?null:r===e?n:n=i(e=r,s)}}(t,e,i),s).on("end.style."+t,null)},styleTween:function(t,i,s){var e="style."+(t+="");if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==i)return this.tween(e,null);if("function"!=typeof i)throw new Error;return this.tween(e,function(t,i,s){var e,n;function a(){var a=i.apply(this,arguments);return a!==n&&(e=(n=a)&&function(t,i,s){return function(e){this.style.setProperty(t,i.call(this,e),s)}}(t,a,s)),e}return a._value=i,a}(t,i,null==s?"":s))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(En(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,function(t){var i,s;function e(){var e=t.apply(this,arguments);return e!==s&&(i=(s=e)&&function(t){return function(i){this.textContent=t.call(this,i)}}(e)),i}return e._value=t,e}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var s in this.__transition)if(+s!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var s=this._id;if(t+="",arguments.length<2){for(var e,n=cn(this.node(),s).tween,a=0,r=n.length;a<r;++a)if((e=n[a]).name===t)return e.value;return null}return this.each((null==i?wn:xn)(s,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?wa:xa)(i,t)):cn(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?Ea:ba)(i,t)):cn(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(function(t,i){if("function"!=typeof i)throw new Error;return function(){un(this,t).ease=i}}(i,t)):cn(this.node(),i).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,i){return function(){var s=i.apply(this,arguments);if("function"!=typeof s)throw new Error;un(this,t).ease=s}}(this._id,t))},end:function(){var t,i,s=this,e=s._id,n=s.size();return new Promise(function(a,r){var o={value:r},h={value:function(){0===--n&&a()}};s.each(function(){var s=un(this,e),n=s.on;n!==t&&((i=(t=n).copy())._.cancel.push(o),i._.interrupt.push(o),i._.end.push(h)),s.on=i}),0===n&&a()})},[Symbol.iterator]:Na[Symbol.iterator]};var ka={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ia(t,i){for(var s;!(s=t.__transition)||!(s=s[i]);)if(!(t=t.parentNode))throw new Error(`transition ${i} not found`);return s}Ce.prototype.interrupt=function(t){return this.each(function(){fn(this,t)})},Ce.prototype.transition=function(t){var i,s;t instanceof Ca?(i=t._id,t=t._name):(i=Aa(),(s=ka).time=Qe(),t=null==t?null:t+"");for(var e=this._groups,n=e.length,a=0;a<n;++a)for(var r,o=e[a],h=o.length,l=0;l<h;++l)(r=o[l])&&hn(r,t,i,l,o,s||Ia(r,i));return new Ca(e,this._parents,t,i)};const za=t=>()=>t;function Ra(t,{sourceEvent:i,target:s,transform:e,dispatch:n}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},transform:{value:e,enumerable:!0,configurable:!0},_:{value:n}})}function Ta(t,i,s){this.k=t,this.x=i,this.y=s}Ta.prototype={constructor:Ta,scale:function(t){return 1===t?this:new Ta(this.k*t,this.x,this.y)},translate:function(t,i){return 0===t&0===i?this:new Ta(this.k,this.x+this.k*t,this.y+this.k*i)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Oa=new Ta(1,0,0);function La(t){t.stopImmediatePropagation()}function qa(t){t.preventDefault(),t.stopImmediatePropagation()}function Fa(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function ja(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Ba(){return this.__zoom||Oa}function Da(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ua(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ha(t,i,s){var e=t.invertX(i[0][0])-s[0][0],n=t.invertX(i[1][0])-s[1][0],a=t.invertY(i[0][1])-s[0][1],r=t.invertY(i[1][1])-s[1][1];return t.translate(n>e?(e+n)/2:Math.min(0,e)||Math.max(0,n),r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r))}Ta.prototype;class Wa{constructor(t,i=0,s=0,e=0,n=void 0){this.opts=n||{},this.canvas=t,this.w=this.canvas.offsetWidth,this.h=this.canvas.offsetHeight,this.offscreenCanvas=document.createElement("canvas"),this.offscreenCanvas.width=this.w,this.offscreenCanvas.height=this.h;const a=this.canvas.getContext("2d"),r=this.offscreenCanvas.getContext("2d");if(!a)throw"Impossible to create canvas 2D context";if(!r)throw"Impossible to create canvas 2D context";if(this.ctx=a,this.offscreenCtx=r,this.view={x:i,y:s,z:e},this.backgroundColor=n.backgroundColor||"white",this.onZoomStartFun=n.onZoomStartFun,this.onZoomEndFun=n.onZoomEndFun,this.onZoomFun=n.onZoomFun,this.extGeo={xMin:NaN,xMax:NaN,yMin:NaN,yMax:NaN},this.updateExtentGeo(),!n.disableZoom){let t=Oa;(function(){var t,i,s,e=Fa,n=ja,a=Ha,r=Da,o=Ua,h=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,c=Fe,f=Te("start","zoom","end"),d=0,g=10;function p(t){t.property("__zoom",Ba).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",b).filter(o).on("touchstart.zoom",S).on("touchmove.zoom",G).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(t,i){return(i=Math.max(h[0],Math.min(h[1],i)))===t.k?t:new Ta(i,t.x,t.y)}function _(t,i,s){var e=i[0]-s[0]*t.k,n=i[1]-s[1]*t.k;return e===t.x&&n===t.y?t:new Ta(t.k,e,n)}function y(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function v(t,i,s,e){t.on("start.zoom",function(){M(this,arguments).event(e).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(e).end()}).tween("zoom",function(){var t=this,a=arguments,r=M(t,a).event(e),o=n.apply(t,a),h=null==s?y(o):"function"==typeof s?s.apply(t,a):s,l=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),u=t.__zoom,f="function"==typeof i?i.apply(t,a):i,d=c(u.invert(h).concat(l/u.k),f.invert(h).concat(l/f.k));return function(t){if(1===t)t=f;else{var i=d(t),s=l/i[2];t=new Ta(s,h[0]-i[0]*s,h[1]-i[1]*s)}r.zoom(null,t)}})}function M(t,i,s){return!s&&t.__zooming||new w(t,i)}function w(t,i){this.that=t,this.args=i,this.active=0,this.sourceEvent=null,this.extent=n.apply(t,i),this.taps=0}function x(t,...i){if(e.apply(this,arguments)){var s=M(this,i).event(t),n=this.__zoom,o=Math.max(h[0],Math.min(h[1],n.k*Math.pow(2,r.apply(this,arguments)))),u=je(t);if(s.wheel)s.mouse[0][0]===u[0]&&s.mouse[0][1]===u[1]||(s.mouse[1]=n.invert(s.mouse[0]=u)),clearTimeout(s.wheel);else{if(n.k===o)return;s.mouse=[u,n.invert(u)],fn(this),s.start()}qa(t),s.wheel=setTimeout(function(){s.wheel=null,s.end()},150),s.zoom("mouse",a(_(m(n,o),s.mouse[0],s.mouse[1]),s.extent,l))}}function E(t,...i){if(!s&&e.apply(this,arguments)){var n=t.currentTarget,r=M(this,i,!0).event(t),o=Ae(t.view).on("mousemove.zoom",function(t){if(qa(t),!r.moved){var i=t.clientX-u,s=t.clientY-c;r.moved=i*i+s*s>d}r.event(t).zoom("mouse",a(_(r.that.__zoom,r.mouse[0]=je(t,n),r.mouse[1]),r.extent,l))},!0).on("mouseup.zoom",function(t){o.on("mousemove.zoom mouseup.zoom",null),function(t,i){var s=t.document.documentElement,e=Ae(t).on("dragstart.drag",null);i&&(e.on("click.drag",Le,Oe),setTimeout(function(){e.on("click.drag",null)},0)),"onselectstart"in s?e.on("selectstart.drag",null):(s.style.MozUserSelect=s.__noselect,delete s.__noselect)}(t.view,r.moved),qa(t),r.event(t).end()},!0),h=je(t,n),u=t.clientX,c=t.clientY;!function(t){var i=t.document.documentElement,s=Ae(t).on("dragstart.drag",Le,Oe);"onselectstart"in i?s.on("selectstart.drag",Le,Oe):(i.__noselect=i.style.MozUserSelect,i.style.MozUserSelect="none")}(t.view),La(t),r.mouse=[h,this.__zoom.invert(h)],fn(this),r.start()}}function b(t,...i){if(e.apply(this,arguments)){var s=this.__zoom,r=je(t.changedTouches?t.changedTouches[0]:t,this),o=s.invert(r),h=s.k*(t.shiftKey?.5:2),c=a(_(m(s,h),r,o),n.apply(this,i),l);qa(t),u>0?Ae(this).transition().duration(u).call(v,c,r,t):Ae(this).call(p.transform,c,r,t)}}function S(s,...n){if(e.apply(this,arguments)){var a,r,o,h,l=s.touches,u=l.length,c=M(this,n,s.changedTouches.length===u).event(s);for(La(s),r=0;r<u;++r)h=[h=je(o=l[r],this),this.__zoom.invert(h),o.identifier],c.touch0?c.touch1||c.touch0[2]===h[2]||(c.touch1=h,c.taps=0):(c.touch0=h,a=!0,c.taps=1+!!t);t&&(t=clearTimeout(t)),a&&(c.taps<2&&(i=h[0],t=setTimeout(function(){t=null},500)),fn(this),c.start())}}function G(t,...i){if(this.__zooming){var s,e,n,r,o=M(this,i).event(t),h=t.changedTouches,u=h.length;for(qa(t),s=0;s<u;++s)n=je(e=h[s],this),o.touch0&&o.touch0[2]===e.identifier?o.touch0[0]=n:o.touch1&&o.touch1[2]===e.identifier&&(o.touch1[0]=n);if(e=o.that.__zoom,o.touch1){var c=o.touch0[0],f=o.touch0[1],d=o.touch1[0],g=o.touch1[1],p=(p=d[0]-c[0])*p+(p=d[1]-c[1])*p,y=(y=g[0]-f[0])*y+(y=g[1]-f[1])*y;e=m(e,Math.sqrt(p/y)),n=[(c[0]+d[0])/2,(c[1]+d[1])/2],r=[(f[0]+g[0])/2,(f[1]+g[1])/2]}else{if(!o.touch0)return;n=o.touch0[0],r=o.touch0[1]}o.zoom("touch",a(_(e,n,r),o.extent,l))}}function P(t,...e){if(this.__zooming){var n,a,r=M(this,e).event(t),o=t.changedTouches,h=o.length;for(La(t),s&&clearTimeout(s),s=setTimeout(function(){s=null},500),n=0;n<h;++n)a=o[n],r.touch0&&r.touch0[2]===a.identifier?delete r.touch0:r.touch1&&r.touch1[2]===a.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps&&(a=je(a,this),Math.hypot(i[0]-a[0],i[1]-a[1])<g)){var l=Ae(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return p.transform=function(t,i,s,e){var n=t.selection?t.selection():t;n.property("__zoom",Ba),t!==n?v(t,i,s,e):n.interrupt().each(function(){M(this,arguments).event(e).start().zoom(null,"function"==typeof i?i.apply(this,arguments):i).end()})},p.scaleBy=function(t,i,s,e){p.scaleTo(t,function(){return this.__zoom.k*("function"==typeof i?i.apply(this,arguments):i)},s,e)},p.scaleTo=function(t,i,s,e){p.transform(t,function(){var t=n.apply(this,arguments),e=this.__zoom,r=null==s?y(t):"function"==typeof s?s.apply(this,arguments):s,o=e.invert(r),h="function"==typeof i?i.apply(this,arguments):i;return a(_(m(e,h),r,o),t,l)},s,e)},p.translateBy=function(t,i,s,e){p.transform(t,function(){return a(this.__zoom.translate("function"==typeof i?i.apply(this,arguments):i,"function"==typeof s?s.apply(this,arguments):s),n.apply(this,arguments),l)},null,e)},p.translateTo=function(t,i,s,e,r){p.transform(t,function(){var t=n.apply(this,arguments),r=this.__zoom,o=null==e?y(t):"function"==typeof e?e.apply(this,arguments):e;return a(Oa.translate(o[0],o[1]).scale(r.k).translate("function"==typeof i?-i.apply(this,arguments):-i,"function"==typeof s?-s.apply(this,arguments):-s),t,l)},e,r)},w.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,i){return this.mouse&&"mouse"!==t&&(this.mouse[1]=i.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=i.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=i.invert(this.touch1[0])),this.that.__zoom=i,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var i=Ae(this.that).datum();f.call(t,this.that,new Ra(t,{sourceEvent:this.sourceEvent,target:p,type:t,transform:this.that.__zoom,dispatch:f}),i)}},p.wheelDelta=function(t){return arguments.length?(r="function"==typeof t?t:za(+t),p):r},p.filter=function(t){return arguments.length?(e="function"==typeof t?t:za(!!t),p):e},p.touchable=function(t){return arguments.length?(o="function"==typeof t?t:za(!!t),p):o},p.extent=function(t){return arguments.length?(n="function"==typeof t?t:za([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),p):n},p.scaleExtent=function(t){return arguments.length?(h[0]=+t[0],h[1]=+t[1],p):[h[0],h[1]]},p.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],p):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},p.constrain=function(t){return arguments.length?(a=t,p):a},p.duration=function(t){return arguments.length?(u=+t,p):u},p.interpolate=function(t){return arguments.length?(c=t,p):c},p.on=function(){var t=f.on.apply(f,arguments);return t===f?p:t},p.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,p):Math.sqrt(d)},p.tapDistance=function(t){return arguments.length?(g=+t,p):g},p})().wheelDelta(t=>-t.deltaY*(1===t.deltaMode?.07:t.deltaMode?1:.004)).on("zoom",s=>{const e=s.transform,n=t.k/e.k;if(1==n){const i=t.x-e.x,s=t.y-e.y;this.pan(i*this.view.z,-s*this.view.z)}else i(s,n);t=e,this.onZoomFun&&this.onZoomFun(s)}).on("start",t=>{this.canvasSave.c=document.createElement("canvas"),this.canvasSave.c.setAttribute("width",""+this.w),this.canvasSave.c.setAttribute("height",""+this.h),this.canvasSave.c.getContext("2d")?.drawImage(this.canvas,0,0),this.canvasSave.dx=0,this.canvasSave.dy=0,this.canvasSave.f=1,this.onZoomStartFun&&this.onZoomStartFun(t)}).on("end",t=>{this.redraw(),this.canvasSave={c:null,dx:0,dy:0,f:1},this.onZoomEndFun&&this.onZoomEndFun(t)})(Ae(this.canvas));const i=(t,i)=>{this.cancelCurrentRequests();const s=t.sourceEvent;if(s instanceof WheelEvent)this.zoom(i,this.pixToGeoX(s.offsetX),this.pixToGeoY(s.offsetY));else if(s instanceof TouchEvent){let t=0,e=0;for(let i of s.targetTouches)t+=i.clientX,e+=i.clientY;t/=s.targetTouches.length,e/=s.targetTouches.length,this.zoom(i,this.pixToGeoX(t),this.pixToGeoY(e))}}}this.xMin=n.centerExtent?n.centerExtent[0]:void 0,this.yMin=n.centerExtent?n.centerExtent[1]:void 0,this.xMax=n.centerExtent?n.centerExtent[2]:void 0,this.yMax=n.centerExtent?n.centerExtent[3]:void 0,this.zoomExtent=n.zoomExtent||[0,1/0],this.canvasSave={c:null,dx:0,dy:0,f:1}}getView(){return this.view}setCenterExtent(t){this.xMin=t[0],this.yMin=t[1],this.xMax=t[2],this.yMax=t[3]}getCenterExtent(){return[this.xMin,this.yMin,this.xMax,this.yMax]}setZoomExtent(t){this.zoomExtent=t}getZoomExtent(){return this.zoomExtent}initCanvasTransform(){this.ctx.setTransform(1,0,0,1,0,0),this.offscreenCtx.setTransform(1,0,0,1,0,0)}setCanvasTransform(){const t=1/this.view.z,i=-this.view.x/this.view.z+.5*this.w,s=this.view.y/this.view.z+.5*this.h;this.ctx.setTransform(t,0,0,-t,i,s),this.offscreenCtx.setTransform(t,0,0,-t,i,s)}getWebGLTransform(){const t=2/(this.w*this.view.z),i=2/(this.h*this.view.z);return[t,0,0,0,i,0,-t*this.view.x,-i*this.view.y,1]}redraw(){throw new Error("Method redraw not implemented.")}cancelCurrentRequests(){throw new Error("Method cancelCurrentRequests not implemented.")}clear(t="white"){this.opts.transparentBackground?(this.ctx.clearRect(0,0,this.w,this.h),this.offscreenCtx.clearRect(0,0,this.w,this.h)):(this.ctx&&(this.ctx.fillStyle=t),this.offscreenCtx&&(this.offscreenCtx.fillStyle=t),this.ctx.fillRect(0,0,this.w,this.h),this.offscreenCtx.fillRect(0,0,this.w,this.h))}pan(t=0,i=0){if(null!=this.xMin&&this.view.x+t<this.xMin&&(t=this.xMin-this.view.x),null!=this.yMin&&this.view.y+i<this.yMin&&(i=this.yMin-this.view.y),null!=this.xMax&&this.view.x+t>this.xMax&&(t=this.xMax-this.view.x),null!=this.yMax&&this.view.y+i>this.yMax&&(i=this.yMax-this.view.y),this.view.x+=t,this.view.y+=i,this.updateExtentGeo(),this.canvasSave.c){const s=1/this.view.z;this.canvasSave.dx-=t*s,this.canvasSave.dy+=i*s,this.clear(this.backgroundColor),this.offscreenCtx.drawImage(this.canvasSave.c,this.canvasSave.dx,this.canvasSave.dy),this.ctx.drawImage(this.offscreenCtx.canvas,0,0)}else console.log("no canvas save")}zoom(t=1,i=this.view.x,s=this.view.y){if(this.zoomExtent[0]==this.view.z&&t<=1)return;if(this.zoomExtent[1]==this.view.z&&t>=1)return;const e=t*this.view.z;e<this.zoomExtent[0]&&(t=this.zoomExtent[0]/this.view.z),e>this.zoomExtent[1]&&(t=this.zoomExtent[1]/this.view.z),this.view.z*=t;let n=(i-this.view.x)*(1-t),a=(s-this.view.y)*(1-t);null!=this.xMin&&this.view.x+n<this.xMin&&(n=this.xMin-this.view.x),null!=this.yMin&&this.view.y+a<this.yMin&&(a=this.yMin-this.view.y),null!=this.xMax&&this.view.x+n>this.xMax&&(n=this.xMax-this.view.x),null!=this.yMax&&this.view.y+a>this.yMax&&(a=this.yMax-this.view.y),this.view.x+=n,this.view.y+=a,this.updateExtentGeo(),this.canvasSave.c&&(this.clear(this.backgroundColor),this.canvasSave.f/=t,this.canvasSave.dx=this.geoToPixX(i)*(1-this.canvasSave.f),this.canvasSave.dy=this.geoToPixY(s)*(1-this.canvasSave.f),this.clear(this.backgroundColor),this.offscreenCtx.drawImage(this.canvasSave.c,this.canvasSave.dx,this.canvasSave.dy,this.canvasSave.f*this.canvasSave.c.width,this.canvasSave.f*this.canvasSave.c.height),this.ctx.drawImage(this.offscreenCanvas,0,0,this.canvas.width,this.canvas.height))}updateExtentGeo(t=20){return this.extGeo={xMin:this.pixToGeoX(-t),xMax:this.pixToGeoX(this.w+t),yMin:this.pixToGeoY(this.h+t),yMax:this.pixToGeoY(-t)},this.extGeo}toDraw(t){return!(t.x<this.extGeo.xMin||t.x>this.extGeo.xMax||t.y<this.extGeo.yMin||t.y>this.extGeo.yMax)}geoToPixX(t){return(t-this.view.x)/this.view.z+.5*this.w}geoToPixY(t){return-(t-this.view.y)/this.view.z+.5*this.h}pixToGeoX(t){return(t-.5*this.w)*this.view.z+this.view.x}pixToGeoY(t){return-(t-.5*this.h)*this.view.z+this.view.y}setViewFromURL(){const t=Wa.getParameterByName("x"),i=Wa.getParameterByName("y"),s=Wa.getParameterByName("z");null==t||null==t||isNaN(+t)||(this.view.x=+t),null==i||null==i||isNaN(+i)||(this.view.y=+i),null==s||null==s||isNaN(+s)||(this.view.z=+s)}static getParameterByName(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return i?decodeURIComponent(i[1].replace(/\+/g," ")):null}}class Xa{constructor(t){t=t||{},this.maxWidth=t.maxWidth||"20em",this.fontSize=t.fontSize||"1.2em",this.background=t.background||"white",this.padding=t.padding||"5px",this.border=t.border||"0px",this["border-radius"]=t["border-radius"]||"0px",this["box-shadow"]=t["box-shadow"]||"5px 5px 5px grey",this["font-family"]=t["font-family"]||"Helvetica, Arial, sans-serif",this.transitionDuration=t.transitionDuration||100,this.xOffset=t.xOffset||30,this.yOffset=t.yOffset||20,this.yMouseOffset=t.yMouseOffset||0,this.xMouseOffset=t.xMouseOffset||0,this.parentElement=t.parentElement||document.body,this.tooltipElement=t.tooltipElement||null,this.tooltip=t.tooltipElement?Ae(t.tooltipElement):Ae(this.parentElement).append("div").attr("id","gridviz-tooltip").attr("class","gridviz-tooltip"),this.tooltip.style("max-width",this.maxWidth),this.tooltip.style("overflow","hidden"),this.tooltip.style("font-size",this.fontSize),this.tooltip.style("background",this.background),this.tooltip.style("padding",this.padding),this.tooltip.style("border",this.border),this.tooltip.style("border-radius",this["border-radius"]),this.tooltip.style("box-shadow",this["box-shadow"]),this.tooltip.style("font-family",this["font-family"]),this.tooltip.style("position","absolute"),this.tooltip.style("pointer-events","none"),this.tooltip.style("opacity","0"),this.tooltip.style("text-wrap","nowrap"),this.tooltip.style("z-index",99999999),this.tooltip.style("left","0"),this.tooltip.style("top","0"),this.tooltip.attr("role","tooltip").attr("aria-live","polite")}show(){this.tooltip.transition().duration(this.transitionDuration).style("opacity",1)}hide(){this.tooltip.transition().duration(this.transitionDuration).style("opacity",0)}html(t){this.tooltip.html(t)}setPosition(t){let i=this.parentElement.getBoundingClientRect(),s=t.clientX-i.left+this.xOffset,e=t.clientY-i.top-this.yOffset;this.tooltip.style("left",s+"px").style("top",e+"px"),this.ensureTooltipInsideContainer(t,i,this.tooltip.node())}ensureTooltipInsideContainer(t,i,s){let e=s,n=i.width,a=i.height;if(e.offsetLeft+e.clientWidth>n){let i=t.clientX-e.clientWidth-this.xOffset;e.style.left=i+"px"}e.offsetTop+e.clientHeight>a&&(e.style.top=a-e.clientHeight+"px"),e.offsetTop<0&&(e.style.top="0px"),e.offsetLeft<0&&(e.style.left="0px")}style(t,i){return 1==arguments.length?this.tooltip.style(t):(this.tooltip.style(t,i),this)}attr(t,i){return 1==arguments.length?this.tooltip.attr(t):(this.tooltip.attr(t,i),this)}}class Za{constructor(t={}){this.map=t.map,this.parentNode=t.parentNode||t.map.container,t.id&&(this.div=Ae("#"+t.id)),this.div&&!this.div.empty()||(this.div=Ae(document.createElement("div")),t.id&&this.div.attr("id",t.id)),t.title&&this.div.attr("title",t.title),t.class&&this.div.attr("class",t.class),t.onClickFunction&&this.div.on("click",t.onClickFunction),this.style("box-shadow","0 7px 8px rgba(0,47,103,.08), 0 0 22px rgba(0,47,103,.04), 0 12px 17px rgba(0,47,103,.04), 0 -4px 4px rgba(0,47,103,.04)"),this.style("background-color","#ffffff"),this.style("position","absolute"),this.style("cursor","pointer"),this.style("display","flex"),this.style("justify-content","center"),this.style("align-items","center"),this.style("width","35px"),this.style("height","30px"),this.parentNode.appendChild(this.div.node())}style(t,i){return this.div.style(t,i),this}}class $a extends Za{constructor(t){super(t),this.onZoom=t.onZoom,this.delta=t.delta||.2,this.zoomInBtn=document.createElement("a"),this.zoomInBtn.id="zoom-in",this.zoomInBtn.className="gridviz-zoom-button",this.zoomInBtn.title="Zoom in",this.zoomInBtn.textContent="+",this.zoomInBtn.addEventListener("click",t=>{this.zoomIn(t)}),this.zoomInBtn.addEventListener("mouseover",()=>{this.zoomInBtn.style.backgroundColor="lightgrey"}),this.zoomInBtn.addEventListener("mouseout",()=>{this.zoomInBtn.style.backgroundColor="#ffffff"}),this.zoomOutBtn=document.createElement("a"),this.zoomOutBtn.id="zoom-out",this.zoomOutBtn.className="gridviz-zoom-button",this.zoomOutBtn.title="Zoom out",this.zoomOutBtn.textContent="-",this.zoomOutBtn.addEventListener("click",t=>{this.zoomOut(t)}),this.zoomOutBtn.addEventListener("mouseover",()=>{this.zoomOutBtn.style.backgroundColor="lightgrey"}),this.zoomOutBtn.addEventListener("mouseout",()=>{this.zoomOutBtn.style.backgroundColor="#ffffff"}),[this.zoomInBtn,this.zoomOutBtn].forEach((t,i)=>{t.style.alignItems="center",t.style.justifyContent="center",t.style.display="flex",t.style.border="none",t.style.color="black",t.style.textAlign="center",t.style.textDecoration="none",t.style.padding="4px",t.style.fontSize="24px",t.style.fontWeight="bold",t.style.userSelect="none",t.style.backgroundColor="#ffffff",0===i&&(t.style.borderBottom="1px solid grey")}),this.style("height","unset"),this.style("display","unset"),t.x?this.style("left",t.x+"px"):this.style("right","10px"),t.y?this.style("top",t.y+"px"):this.style("top","10px"),this.div.node().appendChild(this.zoomInBtn),this.div.node().appendChild(this.zoomOutBtn)}zoomIn(t){this.map.setZoom(this.map.getZoom()*(1-this.delta)).redraw(),this.onZoom&&this.onZoom(t)}zoomOut(t){this.map.setZoom(this.map.getZoom()*(1+this.delta)).redraw(),this.onZoom&&this.onZoom(t)}}class Va extends Za{isFullscreen=!1;constructor(t){super(t),this.div.node().innerHTML='\n        <svg\n            style="height: 1.2rem; width: 1.2rem; fill:black; margin:0;"\n            focusable="false"\n            aria-hidden="true"\n        >\n            <svg fill="#000000" viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg">\n            <title/>\n            <g>\n            <path d="M30,0H6A5.9966,5.9966,0,0,0,0,6V30a6,6,0,0,0,12,0V12H30A6,6,0,0,0,30,0Z"/>\n            <path d="M90,0H66a6,6,0,0,0,0,12H84V30a6,6,0,0,0,12,0V6A5.9966,5.9966,0,0,0,90,0Z"/>\n            <path d="M30,84H12V66A6,6,0,0,0,0,66V90a5.9966,5.9966,0,0,0,6,6H30a6,6,0,0,0,0-12Z"/>\n            <path d="M90,60a5.9966,5.9966,0,0,0-6,6V84H66a6,6,0,0,0,0,12H90a5.9966,5.9966,0,0,0,6-6V66A5.9966,5.9966,0,0,0,90,60Z"/>\n            </g>\n            </svg>\n        </svg>\n        ',this.defaultHeight=this.map.h,this.defaultWidth=this.map.w,this.div.on("click",t=>{this.onClickFunction(t)}),this.div.on("mouseover",t=>{this.style("background-color","lightgrey")}),this.div.on("mouseout",t=>{this.style("background-color","#ffffff")}),t.x?this.style("left",t.x+"px"):this.style("right","10px"),t.y?this.style("top",t.y+"px"):this.style("top","90px")}onClickFunction(t){this.isFullscreen?(this.closeFullscreen(this.map.container),this.map.h=this.defaultHeight,this.map.w=this.defaultWidth,this.map.geoCanvas.h=this.defaultHeight,this.map.geoCanvas.w=this.defaultWidth,this.map.geoCanvas.canvas.setAttribute("width",""+this.defaultWidth),this.map.geoCanvas.canvas.setAttribute("height",""+this.defaultHeight),this.map.redraw(),this.isFullscreen=!1):(this.openFullscreen(this.map.container),this.map.h=window.screen.height,this.map.w=window.screen.width,this.isFullscreen=!0)}openFullscreen(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}closeFullscreen(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}}class Ya{constructor(t,i){i=i||{},this.layers=i.layers||[],this.container=t||document.getElementById("gridviz"),this.container?(this.container.style.position="relative",this.w=i.w||this.container.offsetWidth,this.h=i.h||this.container.offsetHeight,this._canvas=i.canvas||this.initialiseCanvas(),this.geoCanvas=new Wa(this._canvas,i.x,i.y,i.z,i),this.geoCanvas.redraw=()=>{this.redraw()},this.geoCanvas.cancelCurrentRequests=()=>{for(const t of this.layers){if(t.dataset?.datasets)for(const i of t.dataset?.datasets)i?.cancelCurrentRequests&&i.cancelCurrentRequests();t.dataset?.cancelCurrentRequests&&t.dataset?.cancelCurrentRequests()}},this.legend=i.legendContainer?Ae(i.legendContainer):null,this.legend||this.initialiseLegend(),i.tooltip||(i.tooltip={}),i.tooltip.parentElement||(i.tooltip.parentElement=this.container),this.tooltip=new Xa(i.tooltip),this.mouseOverHandler=t=>this.focusCell(t),this.mouseMoveHandler=t=>this.focusCell(t),this.mouseOutHandler=t=>this.tooltip.hide(),this.geoCanvas.canvas.addEventListener("mouseover",this.mouseOverHandler),this.geoCanvas.canvas.addEventListener("mousemove",this.mouseMoveHandler),this.geoCanvas.canvas.addEventListener("mouseout",this.mouseOutHandler),this.defineResizeObserver(),this.geoCanvas.onZoomStartFun=t=>{i.onZoomStartFun&&i.onZoomStartFun(t),this.tooltip.hide()},this.canvasSave=null,this.selectionRectangleColor=i.selectionRectangleColor||"#FF6347",this.selectionRectangleWidthPix=i.selectionRectangleWidthPix||(()=>4),this.transparentBackground=i.transparentBackground,this.defaultGlobalCompositeOperation=i.defaultGlobalCompositeOperation||this.geoCanvas.ctx.globalCompositeOperation):console.error("Cannot find gridviz container element.")}initialiseCanvas(){const t=document.createElement("canvas");return t.setAttribute("width",""+this.w),t.setAttribute("height",""+this.h),this.container.appendChild(t),t}initialiseLegend(){this.legend=Ae(this.container).append("div").attr("id","gridviz-legend").style("position","absolute").style("width","auto").style("height","auto").style("background","#FFFFFF").style("border","0px").style("box-shadow","3px 3px 3px grey, -3px -3px 3px #ddd").style("font-family","Helvetica, Arial, sans-serif").style("bottom","15px").style("right","15px")}layers_(t){return 0===arguments.length?this.layers:(1===arguments.length?Array.isArray(t)?this.layers=t:this.layers=[t]:this.layers=arguments,this)}redraw(){this.legend&&this.legend.selectAll("*").remove(),this.geoCanvas.initCanvasTransform(),this.geoCanvas.clear(this.geoCanvas.backgroundColor);const t=this.geoCanvas.view.z;this.updateExtentGeo();for(const i of this.layers)i.visible&&!i.visible(t)||(this.geoCanvas.offscreenCtx.globalAlpha=i.alpha?i.alpha(t):1,i.blendOperation&&(this.geoCanvas.offscreenCtx.globalCompositeOperation=i.blendOperation(t)),this.geoCanvas.setCanvasTransform(),i.draw(this.geoCanvas,this.legend),i.filterColor&&i.drawFilter(this.geoCanvas),this.geoCanvas.offscreenCtx.globalAlpha=1,this.geoCanvas.offscreenCtx.globalCompositeOperation=this.defaultGlobalCompositeOperation);return this.geoCanvas.initCanvasTransform(),this.geoCanvas.ctx.drawImage(this.geoCanvas.offscreenCanvas,0,0),this.canvasSave=null,this}updateExtentGeo(t=20){return this.geoCanvas.updateExtentGeo(t)}focusCell(t){const i={x:this.geoCanvas.pixToGeoX(t.offsetX+this.tooltip.xMouseOffset),y:this.geoCanvas.pixToGeoY(t.offsetY+this.tooltip.yMouseOffset)},s=this.getCellFocusInfo(i);if(this.transparentBackground)return s?(this.tooltip.html(s.html),this.tooltip.setPosition(t),this.tooltip.show()):this.tooltip.hide(),this.canvasSave=document.createElement("canvas"),this.canvasSave.setAttribute("width",""+this.w),this.canvasSave.setAttribute("height",""+this.h),this.canvasSave.getContext("2d")?.drawImage(this.geoCanvas.canvas,0,0),void this.geoCanvas.initCanvasTransform();if(s){this.tooltip.html(s.html),this.tooltip.setPosition(t),this.tooltip.show(),this.canvasSave?this.geoCanvas.offscreenCtx.drawImage(this.canvasSave,0,0):(this.canvasSave=document.createElement("canvas"),this.canvasSave.setAttribute("width",""+this.w),this.canvasSave.setAttribute("height",""+this.h),this.canvasSave.getContext("2d")?.drawImage(this.geoCanvas.offscreenCanvas,0,0));const i=this.selectionRectangleWidthPix?this.selectionRectangleWidthPix(s.resolution,this.geoCanvas.view.z):4;this.geoCanvas.initCanvasTransform();const e=this.geoCanvas.offscreenCtx;e.strokeStyle=this.selectionRectangleColor,e.lineWidth=i,e.beginPath(),e.rect(this.geoCanvas.geoToPixX(s.cell.x)-i/2,this.geoCanvas.geoToPixY(s.cell.y)+i/2,s.resolution/this.geoCanvas.view.z+i,-s.resolution/this.geoCanvas.view.z-i),e.stroke(),this.geoCanvas.ctx.drawImage(this.geoCanvas.offscreenCanvas,0,0)}else this.tooltip.hide(),this.canvasSave&&this.geoCanvas.ctx.drawImage(this.canvasSave,0,0)}getCellFocusInfo(t){const i=this.geoCanvas.view.z;for(let s=this.layers.length-1;s>=0;s--){const e=this.layers[s];if(e.visible&&!e.visible(i))continue;if("none"===e.cellInfoHTML)continue;if(!e.cellInfoHTML)continue;if(!e.getDataset)continue;const n=e.getDataset(i);if(!n)continue;const a=n.getCellFromPosition(t,n.getViewCache());if(!a)return;if(n.mixedResolution){const t=+n.mixedResolution(a),i=e.cellInfoHTML(a,t);if(!i)return;return{cell:a,html:i,resolution:t}}const r=e.cellInfoHTML(a,n.getResolution());if(!r)return;return{cell:a,html:r,resolution:n.getResolution()}}}setView(t,i,s=void 0){return this.geoCanvas.view.x=t,this.geoCanvas.view.y=i,null!=s&&(this.geoCanvas.view.z=s),this}getView(){return this.geoCanvas.view}getZoom(){return this.geoCanvas.view.z}setZoom(t){return this.geoCanvas.view.z=t,this}getCenterExtent(){return this.geoCanvas.getCenterExtent()}setCenterExtent(t){return this.geoCanvas.setCenterExtent(t),this}getZoomExtent(){return this.geoCanvas.getZoomExtent()}setZoomExtent(t){return this.geoCanvas.setZoomExtent(t),this}getBackgroundColor(){return this.geoCanvas.backgroundColor}setBackgroundColor(t){return this.geoCanvas.backgroundColor=t,this}addZoomButtons(t){return this.zoomButtons=new $a({map:this,id:t?.id||"gridviz-zoom-buttons-"+this.container.id,class:t?.class,x:t?.x,y:t?.y,onZoom:t?.onZoom,delta:t?.delta||.2}),this}addFullscreenButton(t){return this.fullscreenButton=new Va({map:this,id:t?.id||"gridviz-fullscreen-button",class:t?.class,x:t?.x,y:t?.y}),this}setViewFromURL(){return this.geoCanvas.setViewFromURL(),this}defineResizeObserver(){let t=!1;new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;let s=this.container;s.clientWidth>0&&s.clientHeight>0&&(t||(t=!0,window.requestAnimationFrame(()=>{t=!1,this.h===s.clientHeight&&this.w===s.clientWidth||(this.h=s.clientHeight,this.w=s.clientWidth,this.geoCanvas.h=this.h,this.geoCanvas.w=this.w,this.geoCanvas.canvas.setAttribute("width",String(this.w)),this.geoCanvas.canvas.setAttribute("height",String(this.h)),this.geoCanvas.offscreenCanvas.setAttribute("width",String(this.w)),this.geoCanvas.offscreenCanvas.setAttribute("height",String(this.h)),this.redraw())})))}).observe(this.container)}destroy(){this.layers=[],this.bgLayers=[],this.container.removeEventListener("mouseover",this.mouseOverHandler),this.container.removeEventListener("mousemove",this.mouseMoveHandler),this.container.removeEventListener("mouseout",this.mouseOutHandler),this.geoCanvas.canvas.remove(),this.legend?.remove(),this.tooltip.tooltip?.remove()}}var Qa={},Ka={};function Ja(t){return new Function("d","return {"+t.map(function(t,i){return JSON.stringify(t)+": d["+i+'] || ""'}).join(",")+"}")}function tr(t){var i=Object.create(null),s=[];return t.forEach(function(t){for(var e in t)e in i||s.push(i[e]=e)}),s}function ir(t,i){var s=t+"",e=s.length;return e<i?new Array(i-e+1).join(0)+s:s}function sr(t){var i=new RegExp('["'+t+"\n\r]"),s=t.charCodeAt(0);function e(t,i){var e,n=[],a=t.length,r=0,o=0,h=a<=0,l=!1;function u(){if(h)return Ka;if(l)return l=!1,Qa;var i,e,n=r;if(34===t.charCodeAt(n)){for(;r++<a&&34!==t.charCodeAt(r)||34===t.charCodeAt(++r););return(i=r)>=a?h=!0:10===(e=t.charCodeAt(r++))?l=!0:13===e&&(l=!0,10===t.charCodeAt(r)&&++r),t.slice(n+1,i-1).replace(/""/g,'"')}for(;r<a;){if(10===(e=t.charCodeAt(i=r++)))l=!0;else if(13===e)l=!0,10===t.charCodeAt(r)&&++r;else if(e!==s)continue;return t.slice(n,i)}return h=!0,t.slice(n,a)}for(10===t.charCodeAt(a-1)&&--a,13===t.charCodeAt(a-1)&&--a;(e=u())!==Ka;){for(var c=[];e!==Qa&&e!==Ka;)c.push(e),e=u();i&&null==(c=i(c,o++))||n.push(c)}return n}function n(i,s){return i.map(function(i){return s.map(function(t){return r(i[t])}).join(t)})}function a(i){return i.map(r).join(t)}function r(t){return null==t?"":t instanceof Date?(n=(s=t).getUTCHours(),a=s.getUTCMinutes(),r=s.getUTCSeconds(),o=s.getUTCMilliseconds(),isNaN(s)?"Invalid Date":((e=s.getUTCFullYear())<0?"-"+ir(-e,6):e>9999?"+"+ir(e,6):ir(e,4))+"-"+ir(s.getUTCMonth()+1,2)+"-"+ir(s.getUTCDate(),2)+(o?"T"+ir(n,2)+":"+ir(a,2)+":"+ir(r,2)+"."+ir(o,3)+"Z":r?"T"+ir(n,2)+":"+ir(a,2)+":"+ir(r,2)+"Z":a||n?"T"+ir(n,2)+":"+ir(a,2)+"Z":"")):i.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t;var s,e,n,a,r,o}return{parse:function(t,i){var s,n,a=e(t,function(t,e){if(s)return s(t,e-1);n=t,s=i?function(t,i){var s=Ja(t);return function(e,n){return i(s(e),n,t)}}(t,i):Ja(t)});return a.columns=n||[],a},parseRows:e,format:function(i,s){return null==s&&(s=tr(i)),[s.map(r).join(t)].concat(n(i,s)).join("\n")},formatBody:function(t,i){return null==i&&(i=tr(t)),n(t,i).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:r}}var er=sr(","),nr=er.parse,ar=(er.parseRows,er.format,er.formatBody,er.formatRows,er.formatRow,er.formatValue,sr("\t")),rr=ar.parse;function or(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function hr(t){return function(i,s,e){return 2===arguments.length&&"function"==typeof s&&(e=s,s=void 0),function(t,i){return fetch(t,i).then(or)}(i,s).then(function(i){return t(i,e)})}}ar.parseRows,ar.format,ar.formatBody,ar.formatRows,ar.formatRow,ar.formatValue,hr(nr),hr(rr),function t(i){function s(t,s){var e,n;return t=null==t?0:+t,s=null==s?1:+s,function(){var a;if(null!=e)a=e,e=null;else do{e=2*i()-1,a=2*i()-1,n=e*e+a*a}while(!n||n>1);return t+s*a*Math.sqrt(-2*Math.log(n)/n)}}return s.source=t,s}(Math.random);const lr=t=>t;function ur(t,i){if((s=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var s,e=t.slice(0,s);return[e.length>1?e[0]+e.slice(2):e,+t.slice(s+1)]}lr.invert=lr;var cr,fr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dr(t){if(!(i=fr.exec(t)))throw new Error("invalid format: "+t);var i;return new gr({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function gr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function pr(t,i){var s=ur(t,i);if(!s)return t+"";var e=s[0],n=s[1];return n<0?"0."+new Array(-n).join("0")+e:e.length>n+1?e.slice(0,n+1)+"."+e.slice(n+1):e+new Array(n-e.length+2).join("0")}dr.prototype=gr.prototype,gr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const mr={"%":(t,i)=>(100*t).toFixed(i),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,i)=>t.toExponential(i),f:(t,i)=>t.toFixed(i),g:(t,i)=>t.toPrecision(i),o:t=>Math.round(t).toString(8),p:(t,i)=>pr(100*t,i),r:pr,s:function(t,i){var s=ur(t,i);if(!s)return t+"";var e=s[0],n=s[1],a=n-(cr=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,r=e.length;return a===r?e:a>r?e+new Array(a-r+1).join("0"):a>0?e.slice(0,a)+"."+e.slice(a):"0."+new Array(1-a).join("0")+ur(t,Math.max(0,i+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function _r(t){return t}var yr,vr=Array.prototype.map,Mr=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wr(t){return yr=function(t){var i,s,e=void 0===t.grouping||void 0===t.thousands?_r:(i=vr.call(t.grouping,Number),s=t.thousands+"",function(t,e){for(var n=t.length,a=[],r=0,o=i[0],h=0;n>0&&o>0&&(h+o+1>e&&(o=Math.max(1,e-h)),a.push(t.substring(n-=o,n+o)),!((h+=o+1)>e));)o=i[r=(r+1)%i.length];return a.reverse().join(s)}),n=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",r=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?_r:function(t){return function(i){return i.replace(/[0-9]/g,function(i){return t[+i]})}}(vr.call(t.numerals,String)),h=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function c(t){var i=(t=dr(t)).fill,s=t.align,c=t.sign,f=t.symbol,d=t.zero,g=t.width,p=t.comma,m=t.precision,_=t.trim,y=t.type;"n"===y?(p=!0,y="g"):mr[y]||(void 0===m&&(m=12),_=!0,y="g"),(d||"0"===i&&"="===s)&&(d=!0,i="0",s="=");var v="$"===f?n:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",M="$"===f?a:/[%p]/.test(y)?h:"",w=mr[y],x=/[defgprs%]/.test(y);function E(t){var n,a,h,f=v,E=M;if("c"===y)E=w(t)+E,t="";else{var b=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:w(Math.abs(t),m),_&&(t=function(t){t:for(var i,s=t.length,e=1,n=-1;e<s;++e)switch(t[e]){case".":n=i=e;break;case"0":0===n&&(n=e),i=e;break;default:if(!+t[e])break t;n>0&&(n=0)}return n>0?t.slice(0,n)+t.slice(i+1):t}(t)),b&&0===+t&&"+"!==c&&(b=!1),f=(b?"("===c?c:l:"-"===c||"("===c?"":c)+f,E=("s"===y?Mr[8+cr/3]:"")+E+(b&&"("===c?")":""),x)for(n=-1,a=t.length;++n<a;)if(48>(h=t.charCodeAt(n))||h>57){E=(46===h?r+t.slice(n+1):t.slice(n))+E,t=t.slice(0,n);break}}p&&!d&&(t=e(t,1/0));var S=f.length+t.length+E.length,G=S<g?new Array(g-S+1).join(i):"";switch(p&&d&&(t=e(G+t,G.length?g-E.length:1/0),G=""),s){case"<":t=f+t+E+G;break;case"=":t=f+G+t+E;break;case"^":t=G.slice(0,S=G.length>>1)+f+t+E+G.slice(S);break;default:t=G+f+t+E}return o(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),E.toString=function(){return t+""},E}return{format:c,formatPrefix:function(t,i){var s,e=c(((t=dr(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor((s=i,((s=ur(Math.abs(s)))?s[1]:NaN)/3)))),a=Math.pow(10,-n),r=Mr[8+n/3];return function(t){return e(a*t)+r}}}}(t),yr.format,yr.formatPrefix,yr}wr({thousands:",",grouping:[3],currency:["$",""]}),Wa.getParameterByName,wr({decimal:".",thousands:" ",grouping:[3],currency:["",""]}),s(271),ms.defs("EPSG:3035","+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"),L.GridvizLayer=function(t){t=t||{},this.proj=t.proj||"EPSG:3035",this.gridvizMap=null,this.onLayerDidMountCallback=t.onLayerDidMountCallback||null,this.onLayerDidMount=function(){this.buildGridvizMap(),this.onLayerDidMountCallback&&this.onLayerDidMountCallback(this.gridvizMap),this.addResizeObserver()},this.addResizeObserver=function(){const t=this._map._container;new ResizeObserver(i=>{window.requestAnimationFrame(()=>{Array.isArray(i)&&i.length&&(this.gridvizMap.h===t.clientHeight&&this.gridvizMap.w===t.clientWidth||(this.gridvizMap.h=t.clientHeight,this.gridvizMap.w=t.clientWidth,this.gridvizMap.geoCanvas.h=t.clientHeight,this.gridvizMap.geoCanvas.w=t.clientWidth,this._canvas.setAttribute("width",""+this.gridvizMap.w),this._canvas.setAttribute("height",""+this.gridvizMap.h),this.gridvizMap.redraw(),this.needRedraw()))})}).observe(t)},this.onLayerWillUnmount=function(){this.gridvizMap.destroy()},this.setData=function(t){this.needRedraw()},this.onDrawLayer=function(t){if(this._zooming)return;const i=this.leafletToGeoCenter(this._map.getCenter()),s=this.leafletZoomToGridvizZoom();this.gridvizMap.setView(i[0],i[1],s),this.gridvizMap.redraw()},this.geoCenterToLeaflet=function(t,i){let s=ms(this.proj,"WGS84",[t,i]);return[s[1],s[0]]},this.leafletToGeoCenter=function(t){return ms(this.proj,[t.lng,t.lat])},this.leafletZoomToGridvizZoom=function(){return this.getMetresPerPixel()},this.getMetresPerPixel=function(){let t=this._map.getCenter(),i=this._map.latLngToContainerPoint(t),s=[i.x+1,i.y],e=this._map.containerPointToLatLng(i),n=this._map.containerPointToLatLng(s),a=this.leafletToGeoCenter(e);return this.leafletToGeoCenter(n)[0]-a[0]},this.buildGridvizMap=function(){let i=this.leafletToGeoCenter(this._map.getCenter());t.container=t.container||this._canvas.parentElement,this.gridvizMap=new Ya(t.container,{canvas:this._canvas,w:window.innerWidth,h:window.innerHeight,x:i[0],y:i[1],z:this.leafletZoomToGridvizZoom(),disableZoom:!0,transparentBackground:!0,selectionRectangleColor:t.selectionRectangleColor,selectionRectangleWidthPix:t.selectionRectangleWidthPix,legendContainer:t.legendContainer,tooltip:{parentElement:document.body}})}},L.GridvizLayer.prototype=new L.CanvasLayer})()})();